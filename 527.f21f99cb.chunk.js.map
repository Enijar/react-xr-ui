{"version":3,"file":"527.f21f99cb.chunk.js","mappings":"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","sources":["webpack://react-xr-ui/./examples/components/example.tsx","webpack://react-xr-ui/./examples/components/view-code.tsx","webpack://react-xr-ui/./src/components/layer.tsx","webpack://react-xr-ui/./src/services/layout.ts","webpack://react-xr-ui/./src/components/xr-ui.tsx"],"sourcesContent":["import React from \"react\";\nimport { BoxLineGeometry } from \"three/examples/jsm/geometries/BoxLineGeometry\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { Controllers, XR, XRButton } from \"@react-three/xr\";\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { XrUi } from \"react-xr-ui\";\n\ntype Props = {\n  children?: React.ReactNode;\n  optimizedRendering?: boolean;\n};\n\nfunction Scene({ children }: Props) {\n  return <>{children}</>;\n}\n\nexport default function Example({\n  children,\n  optimizedRendering = false,\n}: Props) {\n  const room = React.useMemo(() => {\n    return new BoxLineGeometry(6, 6, 6, 10, 10, 10).translate(0, 3, 0);\n  }, []);\n\n  return (\n    <>\n      <Canvas legacy flat linear gl={{ alpha: false }}>\n        <XR>\n          <XrUi fontFamily=\"system-ui\" optimizedRendering={optimizedRendering}>\n            {/** Background, cameras, controls and lights */}\n            <color args={[\"#333333\"]} attach=\"background\" />\n            <lineSegments geometry={room}>\n              <lineBasicMaterial color=\"#c0c0c0\" />\n            </lineSegments>\n            <PerspectiveCamera makeDefault position={[0, 1.6, 0]} />\n            <OrbitControls makeDefault target={[0, 1, -1.8]} />\n            <ambientLight />\n            <Controllers />\n\n            <Scene>\n              <group position={[0, 1, -1.88]}>{children}</group>\n            </Scene>\n          </XrUi>\n        </XR>\n      </Canvas>\n      <XRButton\n        style={{\n          position: \"absolute\",\n          bottom: \"1em\",\n          color: \"black\",\n          left: \"50%\",\n          translate: \"-50%\",\n          padding: \"0.5em 1em\",\n          cursor: \"pointer\",\n        }}\n        mode=\"VR\"\n        sessionInit={{\n          optionalFeatures: [\n            \"local-floor\",\n            \"bounded-floor\",\n            \"hand-tracking\",\n            \"layers\",\n          ],\n        }}\n      >\n        Enter Immersive VR\n      </XRButton>\n    </>\n  );\n}\n","import React from \"react\";\n\ntype Props = {\n  pathname: string;\n};\n\nexport default function ViewCode({ pathname }: Props) {\n  return (\n    <a\n      target=\"_blank\"\n      rel=\"nofollow\"\n      href={`https://github.com/Enijar/react-xr-ui/tree/main/examples/examples/${pathname}.tsx`}\n      style={{\n        display: \"flex\",\n        gap: \"1ch\",\n        position: \"absolute\",\n        insetInlineEnd: \"1em\",\n        insetBlockStart: \"1em\",\n        blockSize: \"2em\",\n        alignItems: \"center\",\n        textDecoration: \"none\",\n        backgroundColor: \"#111111\",\n        paddingInline: \"1em\",\n        paddingBlock: \"0.5em\",\n        borderRadius: \"0.25em\",\n        cursor: \"pointer\",\n      }}\n    >\n      <span>View Code</span>\n      <svg\n        height=\"157.06\"\n        viewBox=\"0 0 161.03 157.06\"\n        width=\"161.03\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        style={{\n          inlineSize: \"auto\",\n          blockSize: \"100%\",\n        }}\n      >\n        <g fill=\"currentColor\">\n          <path\n            d=\"m80.52 0c-44.47 0-80.52 36.05-80.52 80.52 0 35.57 23.07 65.76 55.06 76.4 4.02.75 5.5-1.75 5.5-3.87 0-1.92-.07-8.26-.11-14.99-22.4 4.87-27.13-9.5-27.13-9.5-3.66-9.31-8.94-11.78-8.94-11.78-7.31-5 .55-4.89.55-4.89 8.09.57 12.34 8.3 12.34 8.3 7.18 12.31 18.84 8.75 23.43 6.69.72-5.2 2.81-8.76 5.11-10.77-17.88-2.04-36.68-8.94-36.68-39.79 0-8.79 3.15-15.97 8.3-21.61-.84-2.03-3.59-10.22.78-21.31 0 0 6.76-2.16 22.15 8.25 6.42-1.78 13.31-2.68 20.15-2.71 6.84.03 13.74.93 20.17 2.71 15.37-10.42 22.12-8.25 22.12-8.25 4.38 11.09 1.63 19.28.79 21.31 5.16 5.64 8.29 12.82 8.29 21.61 0 30.93-18.84 37.73-36.77 39.73 2.89 2.5 5.46 7.4 5.46 14.91 0 10.77-.09 19.44-.09 22.1 0 2.14 1.45 4.65 5.53 3.86 31.97-10.66 55.02-40.83 55.02-76.39 0-44.48-36.05-80.53-80.51-80.53\"\n            fillRule=\"evenodd\"\n          />\n          <path d=\"m30.5 115.61c-.18.4-.81.52-1.38.25-.58-.26-.91-.81-.72-1.21.17-.41.8-.53 1.39-.25.59.26.92.81.72 1.22\" />\n          <path d=\"m33.76 119.24c-.38.36-1.13.19-1.64-.37-.53-.56-.63-1.31-.24-1.67.4-.35 1.12-.19 1.65.37.53.57.63 1.31.23 1.67z\" />\n          <path d=\"m36.93 123.88c-.49.34-1.3.02-1.8-.69-.49-.72-.49-1.57.01-1.92.5-.34 1.29-.03 1.8.68.49.73.49 1.59-.01 1.94\" />\n          <path d=\"m41.28 128.36c-.44.49-1.38.36-2.07-.31-.7-.65-.9-1.57-.46-2.06.45-.49 1.39-.35 2.09.31.7.65.91 1.58.44 2.06z\" />\n          <path d=\"m47.28 130.96c-.19.63-1.1.92-2.01.65-.91-.28-1.51-1.01-1.32-1.65.19-.63 1.1-.93 2.02-.65.91.27 1.51 1.01 1.32 1.65\" />\n          <path d=\"m53.87 131.44c.02.66-.75 1.21-1.71 1.23s-1.74-.52-1.75-1.17c0-.67.76-1.22 1.72-1.23.96-.02 1.74.51 1.74 1.17z\" />\n          <path d=\"m60 130.4c.11.65-.55 1.31-1.5 1.49-.93.17-1.8-.23-1.92-.87-.12-.66.56-1.33 1.49-1.5.95-.17 1.8.22 1.93.88z\" />\n        </g>\n      </svg>\n    </a>\n  );\n}\n","import React from \"react\";\nimport * as THREE from \"three\";\nimport canvasTxt from \"canvas-txt\";\nimport { useFrame } from \"@react-three/fiber\";\nimport layout from \"../services/layout\";\nimport {\n  Attrs,\n  LayerContextType,\n  LayerProps,\n  LayerRef,\n  ValueArray,\n} from \"../types\";\nimport { XrUiContext } from \"./xr-ui\";\n\nconst LayerContext = React.createContext<LayerContextType>({\n  parentUuid: null,\n  parentSize: { width: 1, height: 1 },\n  currentChildren: [],\n  renderOrder: 0,\n  addChild() {},\n  removeChild() {},\n});\n\nconst DEFAULT_BACKGROUND_POSITION: LayerProps[\"backgroundPosition\"] = [0, 0];\n\nconst CACHED_IMAGES = new Map<string, HTMLImageElement>();\n\nfunction Layer(\n  {\n    optimizedRendering,\n    zIndex = 0,\n    resolution,\n    visible = true,\n    autoLayout = true,\n    premultiplyAlpha,\n    depthTest,\n    depthWrite = false,\n    width,\n    height,\n    aspectRatio,\n    opacity = 1,\n    backgroundColor = \"transparent\",\n    backgroundImage,\n    backgroundSize,\n    backgroundPosition = DEFAULT_BACKGROUND_POSITION,\n    alphaTest = 0,\n    padding = 0,\n    borderRadius = 0,\n    borderWidth = 0,\n    borderColor = \"transparent\",\n    flexDirection = \"row\",\n    alignItems = \"center\",\n    justifyContent = \"center\",\n    gap = 0,\n    textContent,\n    textAlign = \"left\",\n    justifyText = false,\n    verticalAlign = \"top\",\n    color = \"white\",\n    fontFamily,\n    fontSize = 0.1,\n    fontWeight = \"normal\",\n    lineHeight = null,\n    childIndex,\n    children,\n    onPointerMove,\n    onPointerOver,\n    onPointerOut,\n    onPointerDown,\n    onPointerUp,\n    imageRendering = \"crisp-edges\",\n    imageSmoothingEnabled = true,\n    textRendering = \"auto\",\n    dpr,\n    onLayout,\n    ...props\n  }: LayerProps,\n  ref: React.ForwardedRef<LayerRef>\n) {\n  const shouldRenderRef = React.useRef(true);\n\n  const [attrs, setAttrs] = React.useState<Attrs>(() => {\n    return {\n      opacity,\n    };\n  });\n\n  React.useEffect(() => {\n    setAttrs((attrs) => {\n      return { ...attrs, opacity };\n    });\n  }, [opacity]);\n\n  const xrUiContext = React.useContext(XrUiContext);\n\n  const res = React.useMemo(() => {\n    return resolution ?? xrUiContext.layerResolution;\n  }, [resolution, xrUiContext.layerResolution]);\n\n  const font = React.useMemo(() => {\n    return fontFamily ?? xrUiContext.fontFamily;\n  }, [fontFamily, xrUiContext.fontFamily]);\n\n  const optimized = React.useMemo(() => {\n    return optimizedRendering ?? xrUiContext.optimizedRendering;\n  }, [optimizedRendering, xrUiContext.optimizedRendering]);\n\n  const groupRef = React.useRef<THREE.Group>(null);\n  const meshRef = React.useRef<THREE.Mesh>(null);\n  const materialRef = React.useRef<THREE.MeshBasicMaterial>(null);\n  const childrenGroupRef = React.useRef<THREE.Group>(null);\n\n  React.useEffect(() => {\n    const material = materialRef.current;\n    if (material === null) return;\n    material.blending = THREE.CustomBlending;\n  }, []);\n\n  React.useImperativeHandle(ref, (): LayerRef => {\n    return {\n      group: groupRef.current,\n      mesh: meshRef.current,\n      material: materialRef.current,\n      setAttrs: setAttrs,\n    };\n  });\n\n  const layerContext = React.useContext(LayerContext);\n\n  const size = React.useMemo<{ width: number; height: number }>(() => {\n    const size: { width: number; height: number } = { width: 1, height: 1 };\n    if (typeof width === \"string\") {\n      const percent = parseFloat(width);\n      if (layerContext.parentUuid === null) {\n        size.width = percent / 100;\n      } else if (isNaN(percent)) {\n        size.width = 1;\n      } else {\n        size.width = layerContext.parentSize.width * (percent / 100);\n      }\n    } else {\n      size.width = width ?? 1;\n    }\n    if (typeof height === \"string\") {\n      const percent = parseFloat(height);\n      if (layerContext.parentUuid === null) {\n        size.height = percent / 100;\n      } else if (isNaN(percent)) {\n        size.height = 1;\n      } else {\n        size.height = layerContext.parentSize.height * (percent / 100);\n      }\n    } else {\n      size.height = height ?? 1;\n    }\n    if (aspectRatio !== undefined) {\n      if (width === undefined) {\n        size.width = size.height * aspectRatio;\n      }\n      if (height === undefined) {\n        size.height = size.width * aspectRatio;\n      }\n    }\n    return size;\n  }, [\n    width,\n    height,\n    layerContext.parentUuid,\n    layerContext.parentSize,\n    aspectRatio,\n  ]);\n\n  const uuid = React.useMemo(() => {\n    return THREE.MathUtils.generateUUID();\n  }, []);\n\n  React.useEffect(() => {\n    if (layerContext.parentUuid === null) return;\n    layerContext.addChild({\n      width: size.width,\n      height: size.height,\n      index: childIndex,\n      autoLayout,\n      uuid,\n    });\n    return () => {\n      layerContext.removeChild(uuid);\n    };\n  }, [size, childIndex, autoLayout, layerContext.parentUuid]);\n\n  const pointerRefs = React.useRef({\n    onPointerMove,\n    onPointerOver,\n    onPointerOut,\n    onPointerDown,\n    onPointerUp,\n  });\n\n  React.useMemo(() => {\n    pointerRefs.current.onPointerMove = onPointerMove;\n    pointerRefs.current.onPointerOver = onPointerOver;\n    pointerRefs.current.onPointerOut = onPointerOut;\n    pointerRefs.current.onPointerDown = onPointerDown;\n    pointerRefs.current.onPointerUp = onPointerUp;\n  }, [onPointerMove, onPointerOver, onPointerOut, onPointerDown, onPointerUp]);\n\n  // Create 2d canvas context\n  const ctx = React.useMemo<CanvasRenderingContext2D>(() => {\n    const canvas = document.createElement(\"canvas\");\n    return canvas.getContext(\"2d\");\n  }, []);\n\n  React.useEffect(() => {\n    ctx.imageSmoothingEnabled = imageSmoothingEnabled;\n    ctx.canvas.style.imageRendering = imageRendering;\n  }, [ctx, imageRendering, imageSmoothingEnabled]);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    ctx.textRendering = textRendering;\n    ctx.canvas.style.textRendering = textRendering;\n  }, [ctx, textRendering]);\n\n  React.useMemo(() => {\n    const s = dpr ?? window.devicePixelRatio ?? 1;\n    ctx.scale(s, s);\n  }, [ctx, dpr]);\n\n  // Set canvas size\n  React.useMemo(() => {\n    ctx.canvas.width = Math.max(1, Math.floor(size.width * res));\n    ctx.canvas.height = Math.max(1, Math.floor(size.height * res));\n  }, [ctx.canvas, size, res]);\n\n  // Create canvas texture with the newly created canvas;\n  // this will be used as the texture for the plane\n  const canvasTexture = React.useMemo(() => {\n    const canvasTexture = new THREE.CanvasTexture(ctx.canvas);\n    canvasTexture.anisotropy = 16;\n    canvasTexture.premultiplyAlpha = true;\n    return canvasTexture;\n  }, [ctx.canvas, size]);\n\n  React.useEffect(() => {\n    canvasTexture.premultiplyAlpha =\n      premultiplyAlpha ?? xrUiContext.premultiplyAlpha;\n  }, [canvasTexture, premultiplyAlpha, xrUiContext.premultiplyAlpha]);\n\n  const images = React.useMemo(() => {\n    const backgroundImage = new Image();\n    return { backgroundImage };\n  }, []);\n\n  const [shouldRenderKey, setShouldRenderKey] = React.useState(0);\n\n  const mountedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  // Set source for background image\n  React.useMemo(() => {\n    if (!backgroundImage) return;\n    if (!CACHED_IMAGES.has(backgroundImage)) {\n      const image = new Image();\n      image.onload = () => {\n        if (!mountedRef.current) return;\n        setShouldRenderKey((shouldRenderKey) => {\n          return (shouldRenderKey + 1) % 1000;\n        });\n      };\n      image.src = backgroundImage;\n      CACHED_IMAGES.set(backgroundImage, image);\n    }\n    images.backgroundImage = CACHED_IMAGES.get(backgroundImage);\n  }, [images.backgroundImage, backgroundImage]);\n\n  const [currentChildren, setCurrentChildren] = React.useState<\n    LayerContextType[\"currentChildren\"]\n  >([]);\n\n  // Only render once if in optimizedRendering mode, else render @ 60FPS\n  React.useEffect(() => {\n    shouldRenderRef.current = true;\n    const frames: number[] = [];\n    frames.push(\n      requestAnimationFrame(() => {\n        frames.push(\n          requestAnimationFrame(() => {\n            shouldRenderRef.current = !optimized;\n          })\n        );\n      })\n    );\n    return () => {\n      frames.forEach((frame) => {\n        cancelAnimationFrame(frame);\n      });\n    };\n  }, [\n    shouldRenderKey,\n    currentChildren,\n    optimized,\n    ctx.canvas,\n    size,\n    res,\n    borderRadius,\n    borderColor,\n    attrs,\n    images,\n    backgroundColor,\n    backgroundPosition,\n    backgroundSize,\n    font,\n    fontSize,\n    lineHeight,\n    textAlign,\n    verticalAlign,\n    justifyText,\n    fontWeight,\n    color,\n    textContent,\n  ]);\n\n  useFrame(() => {\n    if (shouldRenderRef.current) {\n      // Useful vars\n      const w = ctx.canvas.width;\n      const h = ctx.canvas.height;\n      const d2r = Math.PI / 180; // degrees to radians\n      const res = Math.min(w, h);\n      const { mapLinear } = THREE.MathUtils;\n\n      ctx.globalCompositeOperation = \"source-over\";\n\n      ctx.clearRect(0, 0, w, h);\n\n      // Border radius\n      {\n        const isArray = Array.isArray(borderRadius);\n        const array = borderRadius as ValueArray;\n        const number = borderRadius as number;\n        let [tl = 0, tr = 0, br = 0, bl = 0] = isArray\n          ? array\n          : [number, number, number, number];\n        tl *= res;\n        tr *= res;\n        br *= res;\n        bl *= res;\n        ctx.beginPath();\n        ctx.moveTo(tl, 0);\n        ctx.lineTo(w - tr, 0);\n        ctx.arc(w - tr, tr, tr, d2r * 270, d2r * 360);\n        ctx.lineTo(w, h - br);\n        ctx.arc(w - br, h - br, br, 0, d2r * 90);\n        ctx.lineTo(bl, h);\n        ctx.arc(bl, h - bl, bl, d2r * 90, d2r * 180);\n        ctx.lineTo(0, tl);\n        ctx.arc(tl, tl, tl, d2r * 180, d2r * 270);\n        ctx.closePath();\n      }\n\n      ctx.globalAlpha = attrs.opacity;\n\n      // Background color\n      ctx.fillStyle = backgroundColor;\n      ctx.lineWidth = borderWidth * res * 2;\n      ctx.fill();\n\n      const ox = borderWidth * res;\n      const oy = borderWidth * res;\n\n      // Background image\n      if (backgroundImage !== undefined) {\n        const x = backgroundPosition[0];\n        const y = backgroundPosition[1];\n        const sx = 0;\n        const sy = 0;\n        const sw = Math.max(1, images.backgroundImage.width);\n        const sh = Math.max(1, images.backgroundImage.height);\n        const ir = sw / sh;\n        const cr = w / h;\n        let dw = sw;\n        let dh = sh;\n        switch (backgroundSize) {\n          case \"stretch\":\n            dw = w;\n            dh = h;\n            break;\n          case \"contain\":\n            dw = w - ox * 2;\n            dh = h - oy * 2;\n            if (ir >= cr) {\n              dh = dw / ir;\n            } else {\n              dw = dh * ir;\n            }\n            break;\n          case \"cover\":\n            dw = w - ox * 2;\n            dh = h - oy * 2;\n            if (ir <= cr) {\n              dh = dw / ir;\n            } else {\n              dw = dh * ir;\n            }\n            break;\n        }\n        const dx = ox + mapLinear(x, 0, 1, 0, w - ox * 2 - dw);\n        const dy = oy + mapLinear(y, 0, 1, 0, h - oy * 2 - dh);\n        ctx.save();\n        ctx.clip();\n        ctx.drawImage(images.backgroundImage, sx, sy, sw, sh, dx, dy, dw, dh);\n        ctx.restore();\n      }\n\n      // Typography\n      if (textContent !== undefined) {\n        canvasTxt.font = font;\n        canvasTxt.fontSize = fontSize * Math.min(w, h);\n        canvasTxt.lineHeight = lineHeight * canvasTxt.fontSize;\n        canvasTxt.align = textAlign;\n        canvasTxt.vAlign = verticalAlign;\n        canvasTxt.justify = justifyText;\n        canvasTxt.fontWeight = fontWeight;\n        ctx.textBaseline = \"bottom\";\n        ctx.fillStyle = color;\n        canvasTxt.drawText(ctx, textContent, ox, oy, w - ox * 2, h - oy * 2);\n      }\n\n      // Fixes antialiasing issue\n      ctx.globalCompositeOperation = \"destination-out\";\n      ctx.stroke();\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.save();\n      ctx.clip();\n\n      ctx.strokeStyle = borderColor;\n      // Border\n      ctx.stroke();\n      ctx.restore();\n    }\n\n    // Make sure canvas texture gets updated\n    canvasTexture.needsUpdate = true;\n  });\n\n  const childGroupRefs = React.useMemo(() => {\n    return currentChildren.map(() => React.createRef<THREE.Group>());\n  }, [currentChildren]);\n\n  const onLayoutRef = React.useRef(onLayout);\n  React.useMemo(() => {\n    onLayoutRef.current = onLayout;\n  }, [onLayout]);\n\n  // Layout calculations\n  React.useEffect(() => {\n    const newSize = { ...size };\n    const res = Math.min(newSize.width, newSize.height);\n    const paddingX = Array.isArray(padding)\n      ? (padding[1] ?? 0) + (padding[3] ?? 0)\n      : padding;\n    const paddingY = Array.isArray(padding)\n      ? (padding[0] ?? 0) + (padding[2] ?? 0)\n      : padding;\n    newSize.width -= res * borderWidth * 2;\n    newSize.height -= res * borderWidth * 2;\n    newSize.width -= res * paddingX * 2;\n    newSize.height -= res * paddingY * 2;\n    childGroupRefs.forEach((childGroupRef, index) => {\n      const childGroup = childGroupRef.current;\n      if (childGroup === null) return;\n      let [x, y] = layout({\n        currentChildren,\n        index,\n        flexDirection,\n        alignItems,\n        justifyContent,\n        gap,\n        size: newSize,\n      });\n      if (!currentChildren[index].autoLayout) {\n        x = 0;\n        y = 0;\n      }\n      childGroup.position.x = x;\n      childGroup.position.y = y;\n    });\n    if (onLayoutRef.current) {\n      onLayoutRef.current();\n    }\n  }, [\n    childGroupRefs,\n    currentChildren,\n    size,\n    flexDirection,\n    alignItems,\n    justifyContent,\n    borderWidth,\n    padding,\n    gap,\n  ]);\n\n  const renderOrder = React.useMemo(() => {\n    if (layerContext.parentUuid === null) {\n      return zIndex;\n    }\n    return layerContext.renderOrder + zIndex + 1;\n  }, [layerContext.parentUuid, layerContext.renderOrder, zIndex]);\n\n  const alpha = React.useMemo(() => {\n    return xrUiContext.alphaTest ?? alphaTest;\n  }, [xrUiContext.alphaTest, alphaTest]);\n\n  const layerProviderValue = React.useMemo<LayerContextType>(() => {\n    return {\n      currentChildren,\n      parentSize: size,\n      parentUuid: uuid,\n      renderOrder,\n      addChild(child) {\n        setCurrentChildren((currentChildren) => {\n          const nextCurrentChildren = [...currentChildren];\n          const index = currentChildren.findIndex((value) => {\n            return value.uuid === child.uuid;\n          });\n          if (index === -1) {\n            nextCurrentChildren.push({ ...child });\n          } else {\n            nextCurrentChildren[index] = { ...child };\n          }\n          return nextCurrentChildren.sort((a, b) => {\n            return a.index - b.index;\n          });\n        });\n      },\n      removeChild(uuid) {\n        setCurrentChildren((currentChildren) => {\n          return currentChildren.filter((value) => value.uuid !== uuid);\n        });\n      },\n    };\n  }, [currentChildren, uuid, size, renderOrder]);\n\n  React.useEffect(() => {\n    const childrenGroup = childrenGroupRef.current;\n    if (childrenGroup === null) return;\n    childrenGroup.traverse((object) => {\n      if (\n        object instanceof THREE.Mesh &&\n        object.material instanceof THREE.Material\n      ) {\n        object.material.transparent = true;\n        object.material.opacity = attrs.opacity;\n        object.material.needsUpdate = true;\n      }\n    });\n  }, [attrs.opacity]);\n\n  React.useEffect(() => {\n    return () => {\n      ctx.canvas.width = 0;\n      ctx.canvas.height = 0;\n    };\n  }, [ctx]);\n\n  return (\n    <LayerContext.Provider value={layerProviderValue}>\n      <group\n        ref={groupRef}\n        {...props}\n        visible={visible}\n        name=\"react-xr-ui-layer\"\n      >\n        <mesh ref={meshRef} renderOrder={renderOrder + zIndex}>\n          <planeGeometry args={[size.width, size.height]} />\n          <meshBasicMaterial\n            ref={materialRef}\n            side={THREE.FrontSide}\n            opacity={attrs.opacity}\n            transparent={true}\n            depthTest={depthTest ?? xrUiContext.depthTest}\n            depthWrite={depthWrite}\n            alphaTest={alpha}\n            map={canvasTexture}\n          />\n        </mesh>\n        <group renderOrder={renderOrder + zIndex + 1} ref={childrenGroupRef}>\n          {React.Children.map(children, (child, childIndex) => {\n            if (React.isValidElement(child)) {\n              return (\n                <group key={childIndex} ref={childGroupRefs[childIndex]}>\n                  {React.cloneElement(child, { ...child.props, childIndex })}\n                </group>\n              );\n            }\n            return child;\n          })}\n        </group>\n      </group>\n    </LayerContext.Provider>\n  );\n}\n\nexport default React.forwardRef(Layer);\n","import { Child, LayerProps, Size } from \"../types\";\n\ntype Axis = \"width\" | \"height\";\n\ntype Args = {\n  currentChildren: Child[];\n  index: number;\n  flexDirection: LayerProps[\"flexDirection\"];\n  alignItems: LayerProps[\"alignItems\"];\n  justifyContent: LayerProps[\"justifyContent\"];\n  gap: LayerProps[\"gap\"];\n  size: Size;\n};\n\nexport default function layout({\n  currentChildren,\n  index,\n  flexDirection,\n  alignItems,\n  justifyContent,\n  gap,\n  size,\n}: Args): [x: number, y: number] {\n  const childrenWidth = currentChildren.reduce((width, child) => {\n    if (!child.autoLayout) return width;\n    return width + child.width;\n  }, 0);\n  const childrenHeight = currentChildren.reduce((height, child) => {\n    if (!child.autoLayout) return height;\n    return height + child.height;\n  }, 0);\n  let x = 0;\n  let y = 0;\n  let contentSize = childrenWidth;\n  let axis: Axis = \"width\";\n  let oppositeAxis: Axis = \"height\";\n  if ([\"column\", \"column-reverse\"].includes(flexDirection)) {\n    axis = \"height\";\n    oppositeAxis = \"width\";\n    contentSize = childrenHeight;\n  }\n  if (\n    currentChildren.length > 0 &&\n    ![\"space-between\", \"space-around\"].includes(justifyContent)\n  ) {\n    contentSize += gap * (currentChildren.length - 1);\n  }\n\n  if ([\"space-between\", \"space-around\"].includes(justifyContent)) {\n    gap = 0;\n  }\n\n  const isReverse = [\"row-reverse\", \"column-reverse\"].includes(flexDirection);\n  const isColumn = [\"column\", \"column-reverse\"].includes(flexDirection);\n\n  let dir = 1;\n  if (isColumn) {\n    dir = -1;\n  }\n\n  /**\n   * justifyContent\n   */\n  switch (justifyContent) {\n    case \"start\":\n      x =\n        ((size[axis] - currentChildren[index][axis]) * 0.5 -\n          (size[axis] - contentSize)) *\n        dir;\n      break;\n    case \"end\":\n      x = (size[axis] * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      break;\n    case \"center\":\n      x = (contentSize * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      break;\n    case \"space-between\":\n      if (currentChildren.length > 1) {\n        x = (size[axis] * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      }\n      break;\n    case \"space-around\":\n      if (currentChildren.length > 1) {\n        x = (size[axis] * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      }\n      break;\n  }\n\n  let spacing = 0;\n  if (currentChildren.length > 1) {\n    if (justifyContent === \"space-between\") {\n      spacing =\n        Math.max(0, size[axis] - contentSize) /\n        Math.max(1, currentChildren.length - 1);\n    }\n    if (justifyContent === \"space-around\") {\n      spacing =\n        Math.max(0, size[axis] - contentSize) /\n        Math.max(1, currentChildren.length + 1);\n    }\n  }\n\n  if (justifyContent === \"space-around\") {\n    x -= spacing * dir;\n  }\n\n  if (isReverse) {\n    for (let i = 1; i <= index; i++) {\n      const child = currentChildren[i - 1];\n      if (!child.autoLayout) continue;\n      x -= (child[axis] + spacing + gap) * dir;\n    }\n  } else {\n    for (let i = currentChildren.length - 2; i >= index; i--) {\n      const child = currentChildren[i + 1];\n      if (!child.autoLayout) continue;\n      x -= (currentChildren[i + 1][axis] + spacing + gap) * dir;\n    }\n  }\n\n  /**\n   * alignItems\n   */\n  switch (alignItems) {\n    case \"start\":\n      y =\n        (size[oppositeAxis] * 0.5 -\n          currentChildren[index][oppositeAxis] * 0.5) *\n        dir;\n      break;\n    case \"end\":\n      y =\n        (currentChildren[index][oppositeAxis] * 0.5 -\n          size[oppositeAxis] * 0.5) *\n        dir;\n      break;\n    case \"center\":\n      y = 0;\n      break;\n  }\n\n  if ([\"column\", \"column-reverse\"].includes(flexDirection)) {\n    return [y, x];\n  }\n  return [x, y];\n}\n","import React from \"react\";\nimport { XrUiContextType } from \"../types\";\n\nexport const XrUiContext = React.createContext<XrUiContextType>({\n  layerResolution: 1024,\n  fontFamily: \"system-ui, sans-serif\",\n  optimizedRendering: false,\n  alphaTest: 0,\n  depthTest: false,\n  premultiplyAlpha: true,\n});\n\ntype Props = {\n  children?: React.ReactNode;\n  layerResolution?: XrUiContextType[\"layerResolution\"];\n  fontFamily?: XrUiContextType[\"fontFamily\"];\n  optimizedRendering?: XrUiContextType[\"optimizedRendering\"];\n  alphaTest?: XrUiContextType[\"alphaTest\"];\n  depthTest?: XrUiContextType[\"depthTest\"];\n  premultiplyAlpha?: XrUiContextType[\"premultiplyAlpha\"];\n};\n\nexport default function XrUi({\n  children,\n  layerResolution = 1024,\n  fontFamily,\n  optimizedRendering = false,\n  alphaTest,\n  depthTest = false,\n  premultiplyAlpha = false,\n}: Props) {\n  return (\n    <XrUiContext.Provider\n      value={{\n        layerResolution,\n        fontFamily,\n        optimizedRendering,\n        alphaTest,\n        depthTest,\n        premultiplyAlpha,\n      }}\n    >\n      {children}\n    </XrUiContext.Provider>\n  );\n}\n"],"names":["Scene","children","Example","optimizedRendering","room","React","BoxLineGeometry","translate","legacy","flat","linear","gl","alpha","XR","fontFamily","args","attach","geometry","color","makeDefault","position","target","style","bottom","left","padding","cursor","mode","sessionInit","optionalFeatures","ViewCode","pathname","rel","href","display","gap","insetInlineEnd","insetBlockStart","blockSize","alignItems","textDecoration","backgroundColor","paddingInline","paddingBlock","borderRadius","height","viewBox","width","xmlns","inlineSize","fill","d","fillRule","LayerContext","parentUuid","parentSize","currentChildren","renderOrder","addChild","removeChild","DEFAULT_BACKGROUND_POSITION","CACHED_IMAGES","Map","Layer","ref","zIndex","resolution","visible","autoLayout","premultiplyAlpha","depthTest","depthWrite","aspectRatio","opacity","backgroundImage","backgroundSize","backgroundPosition","alphaTest","borderWidth","borderColor","flexDirection","justifyContent","textContent","textAlign","justifyText","verticalAlign","fontSize","fontWeight","lineHeight","childIndex","onPointerMove","onPointerOver","onPointerOut","onPointerDown","onPointerUp","imageRendering","imageSmoothingEnabled","textRendering","dpr","onLayout","props","shouldRenderRef","attrs","setAttrs","xrUiContext","XrUiContext","res","layerResolution","font","optimized","groupRef","meshRef","materialRef","childrenGroupRef","material","current","blending","THREE","group","mesh","layerContext","size","percent","parseFloat","isNaN","undefined","uuid","index","pointerRefs","ctx","document","createElement","getContext","canvas","s","window","devicePixelRatio","scale","Math","max","floor","canvasTexture","anisotropy","images","Image","shouldRenderKey","setShouldRenderKey","mountedRef","has","image","onload","src","set","get","setCurrentChildren","frames","push","requestAnimationFrame","forEach","frame","cancelAnimationFrame","useFrame","w","h","d2r","PI","min","mapLinear","globalCompositeOperation","clearRect","isArray","Array","array","number","tl","tr","br","bl","beginPath","moveTo","lineTo","arc","closePath","globalAlpha","fillStyle","lineWidth","ox","oy","x","y","sx","sy","sw","sh","ir","cr","dw","dh","dx","dy","save","clip","drawImage","restore","canvasTxt","textBaseline","stroke","strokeStyle","needsUpdate","childGroupRefs","map","onLayoutRef","newSize","paddingX","paddingY","childGroupRef","childGroup","childrenWidth","reduce","child","childrenHeight","contentSize","axis","oppositeAxis","includes","length","isReverse","dir","spacing","i","layout","layerProviderValue","nextCurrentChildren","findIndex","value","sort","a","b","filter","childrenGroup","traverse","object","transparent","Provider","name","side","key","XrUi"],"sourceRoot":""}
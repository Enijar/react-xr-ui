"use strict";(self.webpackChunkreact_xr_ui=self.webpackChunkreact_xr_ui||[]).push([[541],{228:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(462),a=n(294),o=n(477),i=n(561),l=n.n(i);let c=-1;const s=a.createContext({parentUuid:null,currentChildren:[],addChild(){},removeChild(){}}),u=[0,0];function d(e,t){let{zIndex:n=0,resolution:i=2048,visible:d=!0,autoLayout:m=!0,width:h=1,height:f=1,opacity:g=1,backgroundColor:p="transparent",backgroundImage:v,backgroundSize:b,backgroundPosition:w=u,borderRadius:x=0,borderWidth:C=0,borderColor:E="transparent",flexDirection:M="row",alignItems:k="center",justifyContent:y="center",gap:I=0,textContent:U,textAlign:S="left",justifyText:A=!1,verticalAlign:R="top",color:T="white",fontFamily:z="system-ui, sans-serif",fontSize:D=.1,fontWeight:P="normal",childIndex:W,children:j,...O}=e;const Z=a.useMemo((()=>++c),[]),B=a.useRef(null),F=a.useRef(null),L=a.useContext(s),_=a.useMemo((()=>o.MathUtils.generateUUID()),[]);a.useEffect((()=>{if(null!==L.parentUuid&&void 0!==W)return L.addChild({width:h,height:f,index:W,uuid:_}),()=>{L.removeChild(_)}}),[h,f,W,L.parentUuid]);const q=a.useMemo((()=>document.createElement("canvas").getContext("2d")),[]);a.useMemo((()=>{q.canvas.width=Math.max(1,Math.floor(h*i)),q.canvas.height=Math.max(1,Math.floor(f*i))}),[q.canvas,h,f,i]);const G=a.useMemo((()=>{const e=new o.CanvasTexture(q.canvas);return e.anisotropy=16,e}),[q.canvas,h,f]),N=a.useMemo((()=>({backgroundImage:new Image})),[]);a.useMemo((()=>{void 0!==v&&(N.backgroundImage.src=v)}),[N.backgroundImage,v]),a.useEffect((()=>{let e;return function t(){e=requestAnimationFrame(t);const n=q.canvas.width,r=q.canvas.height,a=Math.PI/180,i=(n+r)/2,{mapLinear:c}=o.MathUtils;q.globalCompositeOperation="source-over",q.clearRect(0,0,n,r);{const e=Array.isArray(x),t=x,o=x;let[l=0,c=0,s=0,u=0]=e?t:[o,o,o,o];l*=i,c*=i,s*=i,u*=i,q.beginPath(),q.moveTo(l,0),q.lineTo(n-c,0),q.arc(n-c,c,c,270*a,360*a),q.lineTo(n,r-s),q.arc(n-s,r-s,s,0,90*a),q.lineTo(u,r),q.arc(u,r-u,u,90*a,180*a),q.lineTo(0,l),q.arc(l,l,l,180*a,270*a),q.closePath()}q.globalAlpha=g,q.fillStyle=p,q.lineWidth=C*i*2,q.fill();const s=C*i,u=C*i;if(void 0!==v){var d,m;const e=null!==(d=null==w?void 0:w[0])&&void 0!==d?d:.5,t=null!==(m=null==w?void 0:w[1])&&void 0!==m?m:.5,a=0,o=0,i=N.backgroundImage.width,l=N.backgroundImage.height,h=i/l,f=n/r;let g=i,p=l;switch(b){case"stretch":g=n,p=r;break;case"contain":g=n-2*s,p=r-2*u,h>f?p=g/h:g=p*h;break;case"cover":g=n-2*s,p=r-2*u,h<f?p=g/h:g=p*h}const v=s+c(e,0,1,0,n-2*s-g),x=u+c(t,0,1,0,r-2*u-p);q.save(),q.clip(),q.drawImage(N.backgroundImage,a,o,i,l,v,x,g,p),q.restore()}void 0!==U&&(l().font=z,l().fontSize=D*Math.min(n,r),l().align=S,l().vAlign=R,l().justify=A,l().fontWeight=P,q.textBaseline="bottom",q.fillStyle=T,l().drawText(q,U,s,u,n-2*s,r-2*u)),q.globalCompositeOperation="destination-out",q.stroke(),q.globalCompositeOperation="source-over",q.save(),q.clip(),q.strokeStyle=E,q.stroke(),q.restore(),G.needsUpdate=!0}(),()=>cancelAnimationFrame(e)}),[]);const[V,H]=a.useState([]),J=a.useMemo((()=>V.map((()=>a.createRef()))),[V]);a.useEffect((()=>{const e={width:h,height:f};e.width-=2*C,e.height-=2*C;let t=[...J];["column","row-reverse"].includes(M)&&t.reverse(),t.forEach(((t,n)=>{if(null===t.current)return;const[r,a]=function(e){let{currentChildren:t,index:n,flexDirection:r,alignItems:a,justifyContent:o,gap:i,size:l}=e;const c=t.reduce(((e,t)=>e+t.width),0),s=t.reduce(((e,t)=>e+t.height),0);let u=0,d=0,m=c,h="width",f="height";if(["column","column-reverse"].includes(r)&&(h="height",f="width",m=s),t.length>0&&!["space-between","space-around"].includes(o)&&(m+=i*(t.length-1)),"start"===o){u=.5*l[h]+.5*t[0][h]-l[h],"column"===r&&(u=.5*l[h]+.5*t[0][h]-m);for(let e=1;e<=n;e++)u+=.5*t[e-1][h]+.5*t[e][h]+i}if("center"===o){u=.5*t[0][h]-.5*m;for(let e=1;e<=n;e++)u+=.5*t[e-1][h]+.5*t[e][h]+i}if("end"===o){u=.5*l[h]+.5*t[0][h]-m,"column"===r&&(u=.5*l[h]+.5*t[0][h]-l[h]);for(let e=1;e<=n;e++)u+=.5*t[e-1][h]+.5*t[e][h]+i}if("space-between"===o)if(m>=l[h]){u=.5*l[h]+.5*t[0][h]-l[h];for(let e=1;e<=n;e++)u+=.5*t[e-1][h]+.5*t[e][h]}else{let e=Math.max(0,l[h]-m);0===t.length?e=0:e>0&&(e/=t.length-1),u=.5*l[h]+.5*t[0][h]-l[h];for(let r=1;r<=n;r++)u+=.5*t[r-1][h]+.5*t[r][h]+e}if("space-around"===o)if(m>=l[h]){u=.5*l[h]+.5*t[0][h]-l[h];for(let e=1;e<=n;e++)u+=.5*t[e-1][h]+.5*t[e][h]}else{let e=Math.max(0,l[h]-m);0===t.length?e=0:e>0&&(e/=t.length+1),u=.5*l[h]+.5*t[0][h]-l[h],u+=e;for(let r=1;r<=n;r++)u+=.5*t[r-1][h]+.5*t[r][h]+e}return"start"===a&&(["row","row-reverse"].includes(r)&&(d=.5*l[f]-.5*t[n][f]),["column","column-reverse"].includes(r)&&(d=-.5*l[f]+.5*t[n][f])),"end"===a&&(["row","row-reverse"].includes(r)&&(d=-.5*l[f]+.5*t[n][f]),["column","column-reverse"].includes(r)&&(d=.5*l[f]-.5*t[n][f])),["column","column-reverse"].includes(r)?[d,u]:[u,d]}({currentChildren:V,index:n,flexDirection:M,alignItems:k,justifyContent:y,gap:I,size:e});t.current.position.x=r,t.current.position.y=a}))}),[J,V,h,f,M,k,y,C,I]);const K=a.useMemo((()=>({currentChildren:V,parentUuid:_,addChild(e){H((t=>{const n=[...t],r=t.findIndex((t=>t.uuid===e.uuid));return-1===r?n.push({...e}):n[r]={...e},n.sort(((e,t)=>e.index-t.index))}))},removeChild(e){H((t=>t.filter((t=>t.uuid!==e))))}})),[V,_]);return a.useEffect((()=>{const e=F.current;null!==e&&e.traverse((e=>{e instanceof o.Mesh&&e.material instanceof o.Material&&(e.material.transparent=!0,e.material.opacity=g,e.material.needsUpdate=!0)}))}),[g]),a.createElement(s.Provider,{value:K},a.createElement("group",(0,r.Z)({ref:t},O,{visible:d}),a.createElement("mesh",{renderOrder:Z+n},a.createElement("planeBufferGeometry",{args:[h,f]}),a.createElement("meshBasicMaterial",{ref:B,side:o.FrontSide,opacity:g,transparent:!0,depthWrite:!1,map:G})),a.createElement("group",{renderOrder:Z+n+1,ref:F},a.Children.map(j,((e,t)=>a.isValidElement(e)?a.createElement("group",{key:t,ref:J[t]},a.cloneElement(e,{...e.props,childIndex:t})):e)))))}const m=a.forwardRef(d);m.displayName="layer";var h=m},291:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(294),a=n(369),o=n(659),i=n(846),l=n(989),c=n(581);function s(e){let{children:t}=e;const n=r.useMemo((()=>new a.d(6,6,6,10,10,10).translate(0,3,0)),[]);return r.createElement(o.de,{legacy:!0,flat:!0,linear:!0,gl:{alpha:!1}},r.createElement("color",{args:["#333333"],attach:"background"}),r.createElement("lineSegments",{geometry:n},r.createElement("lineBasicMaterial",{color:"#c0c0c0"})),r.createElement(l.c,{makeDefault:!0,position:[0,1.6,0]}),r.createElement(c.z,{makeDefault:!0,target:[0,1,-1.8]}),r.createElement("ambientLight",null),r.createElement(i.M,null),r.createElement("group",{position:[0,1,-1.88]},t))}},541:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var r=n(294),a=n(477),o=n(149),i=n(291),l=n(228);function c(){const e=r.useRef(null),[t,n]=r.useState(0);return(0,o.x)((()=>{const t=e.current;if(null===t)return;const{mapLinear:r}=a.MathUtils,o=Date.now(),i=(1+Math.sin(.001*o))/2;t.position.x=r(i,0,1,-.5,.5),n((()=>r(i,0,1,0,.5)))})),r.createElement(l.Z,{ref:e,width:1,height:1,backgroundColor:"crimson",borderRadius:t,borderWidth:.02,borderColor:"#222222",backgroundPosition:[.5,.5]})}function s(){return r.createElement(i.Z,null,r.createElement(c,null))}}}]);
//# sourceMappingURL=541.f37a644f.chunk.js.map
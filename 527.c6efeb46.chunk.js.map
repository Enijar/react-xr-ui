{"version":3,"file":"527.c6efeb46.chunk.js","mappings":"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","sources":["webpack://react-xr-ui/./examples/components/example.tsx","webpack://react-xr-ui/./examples/components/view-code.tsx","webpack://react-xr-ui/./src/components/layer.tsx","webpack://react-xr-ui/./src/services/layout.ts","webpack://react-xr-ui/./src/services/interactive.ts","webpack://react-xr-ui/./src/services/update.ts"],"sourcesContent":["import React from \"react\";\nimport { BoxLineGeometry } from \"three/examples/jsm/geometries/BoxLineGeometry\";\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { Controllers, useXR, useXREvent, XR, XRButton } from \"@react-three/xr\";\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { update, interactive } from \"react-xr-ui\";\n\ntype Props = {\n  children?: React.ReactNode;\n};\n\nfunction Scene({ children }: Props) {\n  const controllers = useXR((state) => state.controllers);\n\n  useFrame((state) => {\n    update(state, controllers);\n  });\n\n  React.useEffect(() => {\n    return interactive.create();\n  }, []);\n\n  useXREvent(\"selectstart\", () => {\n    interactive.enabled = true;\n    interactive.pointerDown = true;\n    interactive.cleanDown = true;\n  });\n\n  useXREvent(\"selectend\", () => {\n    interactive.pointerDown = false;\n    interactive.cleanUp = true;\n  });\n\n  return <>{children}</>;\n}\n\nexport default function Example({ children }: Props) {\n  const room = React.useMemo(() => {\n    return new BoxLineGeometry(6, 6, 6, 10, 10, 10).translate(0, 3, 0);\n  }, []);\n\n  return (\n    <>\n      <Canvas legacy flat linear gl={{ alpha: false }}>\n        <XR>\n          {/** Background, cameras, controls and lights */}\n          <color args={[\"#333333\"]} attach=\"background\" />\n          <lineSegments geometry={room}>\n            <lineBasicMaterial color=\"#c0c0c0\" />\n          </lineSegments>\n          <PerspectiveCamera makeDefault position={[0, 1.6, 0]} />\n          <OrbitControls makeDefault target={[0, 1, -1.8]} />\n          <ambientLight />\n          <Controllers />\n\n          <Scene>\n            <group position={[0, 1, -1.88]}>{children}</group>\n          </Scene>\n        </XR>\n      </Canvas>\n      <XRButton\n        style={{\n          position: \"absolute\",\n          bottom: \"1em\",\n          color: \"black\",\n          left: \"50%\",\n          translate: \"-50%\",\n          padding: \"0.5em 1em\",\n          cursor: \"pointer\",\n        }}\n        mode=\"VR\"\n        sessionInit={{\n          optionalFeatures: [\n            \"local-floor\",\n            \"bounded-floor\",\n            \"hand-tracking\",\n            \"layers\",\n          ],\n        }}\n      >\n        Enter Immersive VR\n      </XRButton>\n    </>\n  );\n}\n","import React from \"react\";\n\ntype Props = {\n  pathname: string;\n};\n\nexport default function ViewCode({ pathname }: Props) {\n  return (\n    <a\n      target=\"_blank\"\n      rel=\"nofollow\"\n      href={`https://github.com/Enijar/react-xr-ui/tree/main/examples/examples/${pathname}.tsx`}\n      style={{\n        display: \"flex\",\n        gap: \"1ch\",\n        position: \"absolute\",\n        insetInlineEnd: \"1em\",\n        insetBlockStart: \"1em\",\n        blockSize: \"2em\",\n        alignItems: \"center\",\n        textDecoration: \"none\",\n        backgroundColor: \"#111111\",\n        paddingInline: \"1em\",\n        paddingBlock: \"0.5em\",\n        borderRadius: \"0.25em\",\n        cursor: \"pointer\",\n      }}\n    >\n      <span>View Code</span>\n      <svg\n        height=\"157.06\"\n        viewBox=\"0 0 161.03 157.06\"\n        width=\"161.03\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        style={{\n          inlineSize: \"auto\",\n          blockSize: \"100%\",\n        }}\n      >\n        <g fill=\"currentColor\">\n          <path\n            d=\"m80.52 0c-44.47 0-80.52 36.05-80.52 80.52 0 35.57 23.07 65.76 55.06 76.4 4.02.75 5.5-1.75 5.5-3.87 0-1.92-.07-8.26-.11-14.99-22.4 4.87-27.13-9.5-27.13-9.5-3.66-9.31-8.94-11.78-8.94-11.78-7.31-5 .55-4.89.55-4.89 8.09.57 12.34 8.3 12.34 8.3 7.18 12.31 18.84 8.75 23.43 6.69.72-5.2 2.81-8.76 5.11-10.77-17.88-2.04-36.68-8.94-36.68-39.79 0-8.79 3.15-15.97 8.3-21.61-.84-2.03-3.59-10.22.78-21.31 0 0 6.76-2.16 22.15 8.25 6.42-1.78 13.31-2.68 20.15-2.71 6.84.03 13.74.93 20.17 2.71 15.37-10.42 22.12-8.25 22.12-8.25 4.38 11.09 1.63 19.28.79 21.31 5.16 5.64 8.29 12.82 8.29 21.61 0 30.93-18.84 37.73-36.77 39.73 2.89 2.5 5.46 7.4 5.46 14.91 0 10.77-.09 19.44-.09 22.1 0 2.14 1.45 4.65 5.53 3.86 31.97-10.66 55.02-40.83 55.02-76.39 0-44.48-36.05-80.53-80.51-80.53\"\n            fillRule=\"evenodd\"\n          />\n          <path d=\"m30.5 115.61c-.18.4-.81.52-1.38.25-.58-.26-.91-.81-.72-1.21.17-.41.8-.53 1.39-.25.59.26.92.81.72 1.22\" />\n          <path d=\"m33.76 119.24c-.38.36-1.13.19-1.64-.37-.53-.56-.63-1.31-.24-1.67.4-.35 1.12-.19 1.65.37.53.57.63 1.31.23 1.67z\" />\n          <path d=\"m36.93 123.88c-.49.34-1.3.02-1.8-.69-.49-.72-.49-1.57.01-1.92.5-.34 1.29-.03 1.8.68.49.73.49 1.59-.01 1.94\" />\n          <path d=\"m41.28 128.36c-.44.49-1.38.36-2.07-.31-.7-.65-.9-1.57-.46-2.06.45-.49 1.39-.35 2.09.31.7.65.91 1.58.44 2.06z\" />\n          <path d=\"m47.28 130.96c-.19.63-1.1.92-2.01.65-.91-.28-1.51-1.01-1.32-1.65.19-.63 1.1-.93 2.02-.65.91.27 1.51 1.01 1.32 1.65\" />\n          <path d=\"m53.87 131.44c.02.66-.75 1.21-1.71 1.23s-1.74-.52-1.75-1.17c0-.67.76-1.22 1.72-1.23.96-.02 1.74.51 1.74 1.17z\" />\n          <path d=\"m60 130.4c.11.65-.55 1.31-1.5 1.49-.93.17-1.8-.23-1.92-.87-.12-.66.56-1.33 1.49-1.5.95-.17 1.8.22 1.93.88z\" />\n        </g>\n      </svg>\n    </a>\n  );\n}\n","import React from \"react\";\nimport * as THREE from \"three\";\nimport canvasTxt from \"canvas-txt\";\nimport layout from \"../services/layout\";\nimport updateManager from \"../services/update\";\nimport { ValueArray, LayerContextType, LayerProps, LayerRef } from \"../types\";\nimport interactive from \"../services/interactive\";\n\nconst LayerContext = React.createContext<LayerContextType>({\n  parentUuid: null,\n  parentSize: { width: 1, height: 1 },\n  currentChildren: [],\n  renderOrder: 0,\n  addChild() {},\n  removeChild() {},\n});\n\nconst DEFAULT_BACKGROUND_POSITION: LayerProps[\"backgroundPosition\"] = [0, 0];\n\nfunction Layer(\n  {\n    zIndex = 0,\n    resolution = 1024,\n    visible = true,\n    autoLayout = true,\n    width,\n    height,\n    opacity = 1,\n    backgroundColor = \"transparent\",\n    backgroundImage,\n    backgroundSize,\n    backgroundPosition = DEFAULT_BACKGROUND_POSITION,\n    padding = 0,\n    borderRadius = 0,\n    borderWidth = 0,\n    borderColor = \"transparent\",\n    flexDirection = \"row\",\n    alignItems = \"center\",\n    justifyContent = \"center\",\n    gap = 0,\n    textContent,\n    textAlign = \"left\",\n    justifyText = false,\n    verticalAlign = \"top\",\n    color = \"white\",\n    fontFamily = \"system-ui, sans-serif\",\n    fontSize = 0.1,\n    fontWeight = \"normal\",\n    lineHeight = null,\n    childIndex,\n    children,\n    onPointerMove,\n    onPointerOver,\n    onPointerOut,\n    onPointerDown,\n    onPointerUp,\n    imageRendering = \"crisp-edges\",\n    imageSmoothingEnabled = true,\n    textRendering = \"auto\",\n    dpr,\n    ...props\n  }: LayerProps,\n  ref: React.ForwardedRef<LayerRef>\n) {\n  const groupRef = React.useRef<THREE.Group>(null);\n  const materialRef = React.useRef<THREE.MeshBasicMaterial>(null);\n  const childrenGroupRef = React.useRef<THREE.Group>(null);\n\n  React.useEffect(() => {\n    const material = materialRef.current;\n    if (material === null) return;\n    material.blending = THREE.CustomBlending;\n  }, []);\n\n  React.useImperativeHandle(ref, () => {\n    return {\n      group: groupRef.current,\n      test() {\n        console.log(\"Test\");\n      },\n    };\n  });\n\n  const layerContext = React.useContext(LayerContext);\n\n  const size = React.useMemo<{ width: number; height: number }>(() => {\n    const size: { width: number; height: number } = { width: 1, height: 1 };\n    if (typeof width === \"string\") {\n      const percent = parseFloat(width);\n      if (layerContext.parentUuid === null) {\n        size.width = percent / 100;\n      } else if (isNaN(percent)) {\n        size.width = 1;\n      } else {\n        size.width = layerContext.parentSize.width * (percent / 100);\n      }\n    } else {\n      size.width = width ?? 1;\n    }\n    if (typeof height === \"string\") {\n      const percent = parseFloat(height);\n      if (layerContext.parentUuid === null) {\n        size.height = percent / 100;\n      } else if (isNaN(percent)) {\n        size.height = 1;\n      } else {\n        size.height = layerContext.parentSize.height * (percent / 100);\n      }\n    } else {\n      size.height = height ?? 1;\n    }\n    return size;\n  }, [width, height, layerContext.parentUuid, layerContext.parentSize]);\n\n  const uuid = React.useMemo(() => {\n    return THREE.MathUtils.generateUUID();\n  }, []);\n\n  React.useEffect(() => {\n    if (layerContext.parentUuid === null) return;\n    layerContext.addChild({\n      width: size.width,\n      height: size.height,\n      index: childIndex,\n      autoLayout,\n      uuid,\n    });\n    return () => {\n      layerContext.removeChild(uuid);\n    };\n  }, [size, childIndex, autoLayout, layerContext.parentUuid]);\n\n  const pointerRefs = React.useRef({\n    onPointerMove,\n    onPointerOver,\n    onPointerOut,\n    onPointerDown,\n    onPointerUp,\n  });\n\n  React.useMemo(() => {\n    pointerRefs.current.onPointerMove = onPointerMove;\n    pointerRefs.current.onPointerOver = onPointerOver;\n    pointerRefs.current.onPointerOut = onPointerOut;\n    pointerRefs.current.onPointerDown = onPointerDown;\n    pointerRefs.current.onPointerUp = onPointerUp;\n  }, [onPointerMove, onPointerOver, onPointerOut, onPointerDown, onPointerUp]);\n\n  React.useLayoutEffect(() => {\n    interactive.add({\n      uuid,\n      object: groupRef.current,\n      onPointerMove: pointerRefs.current.onPointerMove,\n      onPointerOver: pointerRefs.current.onPointerOver,\n      onPointerOut: pointerRefs.current.onPointerOut,\n      onPointerDown: pointerRefs.current.onPointerDown,\n      onPointerUp: pointerRefs.current.onPointerUp,\n    });\n    return () => {\n      interactive.remove(uuid);\n    };\n  }, [uuid]);\n\n  // Create 2d canvas context\n  const ctx = React.useMemo<CanvasRenderingContext2D>(() => {\n    const canvas = document.createElement(\"canvas\");\n    return canvas.getContext(\"2d\");\n  }, []);\n\n  React.useEffect(() => {\n    ctx.imageSmoothingEnabled = imageSmoothingEnabled;\n    ctx.canvas.style.imageRendering = imageRendering;\n  }, [ctx, imageRendering, imageSmoothingEnabled]);\n\n  React.useEffect(() => {\n    // @ts-ignore\n    ctx.textRendering = textRendering;\n    ctx.canvas.style.textRendering = textRendering;\n  }, [ctx, textRendering]);\n\n  React.useMemo(() => {\n    const s = dpr ?? window.devicePixelRatio ?? 1;\n    ctx.scale(s, s);\n  }, [ctx, dpr]);\n\n  // Set canvas size\n  React.useMemo(() => {\n    ctx.canvas.width = Math.max(1, Math.floor(size.width * resolution));\n    ctx.canvas.height = Math.max(1, Math.floor(size.height * resolution));\n  }, [ctx.canvas, size, resolution]);\n\n  // Create canvas texture with the newly created canvas;\n  // this will be used as the texture for the plane\n  const canvasTexture = React.useMemo(() => {\n    const canvasTexture = new THREE.CanvasTexture(ctx.canvas);\n    canvasTexture.anisotropy = 16;\n    canvasTexture.premultiplyAlpha = true;\n    return canvasTexture;\n  }, [ctx.canvas, size]);\n\n  const images = React.useMemo(() => {\n    const backgroundImage = new Image();\n    return { backgroundImage };\n  }, []);\n\n  // Set source for background image\n  React.useMemo(() => {\n    if (!backgroundImage) return;\n    images.backgroundImage.src = backgroundImage;\n  }, [images.backgroundImage, backgroundImage]);\n\n  const update = React.useCallback(() => {\n    // Useful vars\n    const w = ctx.canvas.width;\n    const h = ctx.canvas.height;\n    const d2r = Math.PI / 180; // degrees to radians\n    const res = Math.min(w, h);\n    const { mapLinear } = THREE.MathUtils;\n\n    ctx.globalCompositeOperation = \"source-over\";\n\n    ctx.clearRect(0, 0, w, h);\n\n    // Border radius\n    {\n      const isArray = Array.isArray(borderRadius);\n      const array = borderRadius as ValueArray;\n      const number = borderRadius as number;\n      let [tl = 0, tr = 0, br = 0, bl = 0] = isArray\n        ? array\n        : [number, number, number, number];\n      tl *= res;\n      tr *= res;\n      br *= res;\n      bl *= res;\n      ctx.beginPath();\n      ctx.moveTo(tl, 0);\n      ctx.lineTo(w - tr, 0);\n      ctx.arc(w - tr, tr, tr, d2r * 270, d2r * 360);\n      ctx.lineTo(w, h - br);\n      ctx.arc(w - br, h - br, br, 0, d2r * 90);\n      ctx.lineTo(bl, h);\n      ctx.arc(bl, h - bl, bl, d2r * 90, d2r * 180);\n      ctx.lineTo(0, tl);\n      ctx.arc(tl, tl, tl, d2r * 180, d2r * 270);\n      ctx.closePath();\n    }\n\n    ctx.globalAlpha = opacity;\n\n    // Background color\n    ctx.fillStyle = backgroundColor;\n    ctx.lineWidth = borderWidth * res * 2;\n    ctx.fill();\n\n    const ox = borderWidth * res;\n    const oy = borderWidth * res;\n\n    // Background image\n    if (backgroundImage !== undefined) {\n      const x = backgroundPosition[0];\n      const y = backgroundPosition[1];\n      const sx = 0;\n      const sy = 0;\n      const sw = Math.max(1, images.backgroundImage.width);\n      const sh = Math.max(1, images.backgroundImage.height);\n      const ir = sw / sh;\n      const cr = w / h;\n      let dw = sw;\n      let dh = sh;\n      switch (backgroundSize) {\n        case \"stretch\":\n          dw = w;\n          dh = h;\n          break;\n        case \"contain\":\n          dw = w - ox * 2;\n          dh = h - oy * 2;\n          if (ir >= cr) {\n            dh = dw / ir;\n          } else {\n            dw = dh * ir;\n          }\n          break;\n        case \"cover\":\n          dw = w - ox * 2;\n          dh = h - oy * 2;\n          if (ir <= cr) {\n            dh = dw / ir;\n          } else {\n            dw = dh * ir;\n          }\n          break;\n      }\n      const dx = ox + mapLinear(x, 0, 1, 0, w - ox * 2 - dw);\n      const dy = oy + mapLinear(y, 0, 1, 0, h - oy * 2 - dh);\n      ctx.save();\n      ctx.clip();\n      ctx.drawImage(images.backgroundImage, sx, sy, sw, sh, dx, dy, dw, dh);\n      ctx.restore();\n    }\n\n    // Typography\n    if (textContent !== undefined) {\n      canvasTxt.font = fontFamily;\n      canvasTxt.fontSize = fontSize * Math.min(w, h);\n      canvasTxt.lineHeight = lineHeight * canvasTxt.fontSize;\n      canvasTxt.align = textAlign;\n      canvasTxt.vAlign = verticalAlign;\n      canvasTxt.justify = justifyText;\n      canvasTxt.fontWeight = fontWeight;\n      ctx.textBaseline = \"bottom\";\n      ctx.fillStyle = color;\n      canvasTxt.drawText(ctx, textContent, ox, oy, w - ox * 2, h - oy * 2);\n    }\n\n    // Fixes antialiasing issue\n    ctx.globalCompositeOperation = \"destination-out\";\n    ctx.stroke();\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.save();\n    ctx.clip();\n\n    ctx.strokeStyle = borderColor;\n    // Border\n    ctx.stroke();\n    ctx.restore();\n\n    // Make sure canvas texture gets updated\n    canvasTexture.needsUpdate = true;\n  }, [\n    ctx,\n    images,\n    borderWidth,\n    borderRadius,\n    borderColor,\n    backgroundImage,\n    backgroundColor,\n    backgroundPosition,\n    backgroundSize,\n    canvasTexture,\n    fontWeight,\n    fontSize,\n    fontFamily,\n    fontSize,\n    lineHeight,\n    justifyContent,\n    verticalAlign,\n    textAlign,\n    textContent,\n    color,\n  ]);\n\n  React.useEffect(() => {\n    updateManager.add(uuid, update);\n    return () => updateManager.remove(uuid);\n  }, [uuid, update]);\n\n  const [currentChildren, setCurrentChildren] = React.useState<\n    LayerContextType[\"currentChildren\"]\n  >([]);\n\n  const childGroupRefs = React.useMemo(() => {\n    return currentChildren.map(() => React.createRef<THREE.Group>());\n  }, [currentChildren]);\n\n  // Layout calculations\n  React.useEffect(() => {\n    const newSize = { ...size };\n    const res = Math.min(newSize.width, newSize.height);\n    const paddingX = Array.isArray(padding)\n      ? (padding[1] ?? 0) + (padding[3] ?? 0)\n      : padding;\n    const paddingY = Array.isArray(padding)\n      ? (padding[0] ?? 0) + (padding[2] ?? 0)\n      : padding;\n    newSize.width -= res * borderWidth * 2;\n    newSize.height -= res * borderWidth * 2;\n    newSize.width -= res * paddingX * 2;\n    newSize.height -= res * paddingY * 2;\n    childGroupRefs.forEach((childGroupRef, index) => {\n      const childGroup = childGroupRef.current;\n      if (childGroup === null) return;\n      let [x, y] = layout({\n        currentChildren,\n        index,\n        flexDirection,\n        alignItems,\n        justifyContent,\n        gap,\n        size: newSize,\n      });\n      if (!currentChildren[index].autoLayout) {\n        x = 0;\n        y = 0;\n      }\n      childGroup.position.x = x;\n      childGroup.position.y = y;\n    });\n  }, [\n    childGroupRefs,\n    currentChildren,\n    size,\n    flexDirection,\n    alignItems,\n    justifyContent,\n    borderWidth,\n    padding,\n    gap,\n  ]);\n\n  const renderOrder = React.useMemo(() => {\n    if (layerContext.parentUuid === null) {\n      return zIndex;\n    }\n    return layerContext.renderOrder + zIndex + 1;\n  }, [layerContext.parentUuid, layerContext.renderOrder, zIndex]);\n\n  const layerProviderValue = React.useMemo<LayerContextType>(() => {\n    return {\n      currentChildren,\n      parentSize: size,\n      parentUuid: uuid,\n      renderOrder,\n      addChild(child) {\n        setCurrentChildren((currentChildren) => {\n          const nextCurrentChildren = [...currentChildren];\n          const index = currentChildren.findIndex((value) => {\n            return value.uuid === child.uuid;\n          });\n          if (index === -1) {\n            nextCurrentChildren.push({ ...child });\n          } else {\n            nextCurrentChildren[index] = { ...child };\n          }\n          return nextCurrentChildren.sort((a, b) => {\n            return a.index - b.index;\n          });\n        });\n      },\n      removeChild(uuid) {\n        setCurrentChildren((currentChildren) => {\n          return currentChildren.filter((value) => value.uuid !== uuid);\n        });\n      },\n    };\n  }, [currentChildren, uuid, size, renderOrder]);\n\n  React.useEffect(() => {\n    const childrenGroup = childrenGroupRef.current;\n    if (childrenGroup === null) return;\n    childrenGroup.traverse((object) => {\n      if (\n        object instanceof THREE.Mesh &&\n        object.material instanceof THREE.Material\n      ) {\n        object.material.transparent = true;\n        object.material.opacity = opacity;\n        object.material.needsUpdate = true;\n      }\n    });\n  }, [opacity]);\n\n  return (\n    <LayerContext.Provider value={layerProviderValue}>\n      <group\n        ref={groupRef}\n        {...props}\n        visible={visible}\n        name=\"react-xr-ui-layer\"\n      >\n        <mesh renderOrder={renderOrder + zIndex}>\n          <planeGeometry args={[size.width, size.height]} />\n          <meshBasicMaterial\n            ref={materialRef}\n            side={THREE.FrontSide}\n            opacity={opacity}\n            transparent={true}\n            depthWrite={false}\n            map={canvasTexture}\n          />\n        </mesh>\n        <group renderOrder={renderOrder + zIndex + 1} ref={childrenGroupRef}>\n          {React.Children.map(children, (child, childIndex) => {\n            if (React.isValidElement(child)) {\n              return (\n                <group key={childIndex} ref={childGroupRefs[childIndex]}>\n                  {React.cloneElement(child, { ...child.props, childIndex })}\n                </group>\n              );\n            }\n            return child;\n          })}\n        </group>\n      </group>\n    </LayerContext.Provider>\n  );\n}\n\nexport default React.forwardRef(Layer);\n","import { Child, LayerProps, Size } from \"../types\";\n\ntype Axis = \"width\" | \"height\";\n\ntype Args = {\n  currentChildren: Child[];\n  index: number;\n  flexDirection: LayerProps[\"flexDirection\"];\n  alignItems: LayerProps[\"alignItems\"];\n  justifyContent: LayerProps[\"justifyContent\"];\n  gap: LayerProps[\"gap\"];\n  size: Size;\n};\n\nexport default function layout({\n  currentChildren,\n  index,\n  flexDirection,\n  alignItems,\n  justifyContent,\n  gap,\n  size,\n}: Args): [x: number, y: number] {\n  const childrenWidth = currentChildren.reduce((width, child) => {\n    if (!child.autoLayout) return width;\n    return width + child.width;\n  }, 0);\n  const childrenHeight = currentChildren.reduce((height, child) => {\n    if (!child.autoLayout) return height;\n    return height + child.height;\n  }, 0);\n  let x = 0;\n  let y = 0;\n  let contentSize = childrenWidth;\n  let axis: Axis = \"width\";\n  let oppositeAxis: Axis = \"height\";\n  if ([\"column\", \"column-reverse\"].includes(flexDirection)) {\n    axis = \"height\";\n    oppositeAxis = \"width\";\n    contentSize = childrenHeight;\n  }\n  if (\n    currentChildren.length > 0 &&\n    ![\"space-between\", \"space-around\"].includes(justifyContent)\n  ) {\n    contentSize += gap * (currentChildren.length - 1);\n  }\n\n  if ([\"space-between\", \"space-around\"].includes(justifyContent)) {\n    gap = 0;\n  }\n\n  const isReverse = [\"row-reverse\", \"column-reverse\"].includes(flexDirection);\n  const isColumn = [\"column\", \"column-reverse\"].includes(flexDirection);\n\n  let dir = 1;\n  if (isColumn) {\n    dir = -1;\n  }\n\n  /**\n   * justifyContent\n   */\n  switch (justifyContent) {\n    case \"start\":\n      x =\n        ((size[axis] - currentChildren[index][axis]) * 0.5 -\n          (size[axis] - contentSize)) *\n        dir;\n      break;\n    case \"end\":\n      x = (size[axis] * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      break;\n    case \"center\":\n      x = (contentSize * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      break;\n    case \"space-between\":\n      if (currentChildren.length > 1) {\n        x = (size[axis] * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      }\n      break;\n    case \"space-around\":\n      if (currentChildren.length > 1) {\n        x = (size[axis] * 0.5 - currentChildren[index][axis] * 0.5) * dir;\n      }\n      break;\n  }\n\n  let spacing = 0;\n  if (currentChildren.length > 1) {\n    if (justifyContent === \"space-between\") {\n      spacing =\n        Math.max(0, size[axis] - contentSize) /\n        Math.max(1, currentChildren.length - 1);\n    }\n    if (justifyContent === \"space-around\") {\n      spacing =\n        Math.max(0, size[axis] - contentSize) /\n        Math.max(1, currentChildren.length + 1);\n    }\n  }\n\n  if (justifyContent === \"space-around\") {\n    x -= spacing * dir;\n  }\n\n  if (isReverse) {\n    for (let i = 1; i <= index; i++) {\n      const child = currentChildren[i - 1];\n      if (!child.autoLayout) continue;\n      x -= (child[axis] + spacing + gap) * dir;\n    }\n  } else {\n    for (let i = currentChildren.length - 2; i >= index; i--) {\n      const child = currentChildren[i + 1];\n      if (!child.autoLayout) continue;\n      x -= (currentChildren[i + 1][axis] + spacing + gap) * dir;\n    }\n  }\n\n  /**\n   * alignItems\n   */\n  switch (alignItems) {\n    case \"start\":\n      y =\n        (size[oppositeAxis] * 0.5 -\n          currentChildren[index][oppositeAxis] * 0.5) *\n        dir;\n      break;\n    case \"end\":\n      y =\n        (currentChildren[index][oppositeAxis] * 0.5 -\n          size[oppositeAxis] * 0.5) *\n        dir;\n      break;\n    case \"center\":\n      y = 0;\n      break;\n  }\n\n  if ([\"column\", \"column-reverse\"].includes(flexDirection)) {\n    return [y, x];\n  }\n  return [x, y];\n}\n","import * as THREE from \"three\";\nimport { XRController } from \"@react-three/xr\";\n\ntype Interaction = {\n  uuid: string;\n  object?: THREE.Object3D;\n  onPointerMove?: (...args: any[]) => void;\n  onPointerOver?: (...args: any[]) => void;\n  onPointerOut?: (...args: any[]) => void;\n  onPointerDown?: (...args: any[]) => void;\n  onPointerUp?: (...args: any[]) => void;\n};\n\ntype Interactive = {\n  disabled: boolean;\n  enabled: boolean;\n  lastInteractionUuid: string;\n  interactions: Interaction[];\n  interactionsState: {\n    [uuid: string]: {\n      downFired: boolean;\n      upFired: boolean;\n      overFired: boolean;\n      outFired: boolean;\n    };\n  };\n  pointerDown: boolean;\n  cleanUp: boolean;\n  cleanDown: boolean;\n  cleanMove: boolean;\n  create: () => void;\n  add: (interaction: Interaction) => void;\n  remove: (uuid: string) => void;\n  handle: (camera: THREE.PerspectiveCamera, raycaster: THREE.Raycaster) => void;\n  update: (\n    camera: THREE.Camera,\n    raycaster: THREE.Raycaster,\n    controllers: XRController[]\n  ) => void;\n};\n\nconst matrix = new THREE.Matrix4();\n\nfunction hasPointerEvent(interaction: Interaction): boolean {\n  return (\n    interaction.onPointerMove !== undefined ||\n    interaction.onPointerOver !== undefined ||\n    interaction.onPointerOut !== undefined ||\n    interaction.onPointerDown !== undefined ||\n    interaction.onPointerUp !== undefined\n  );\n}\n\nfunction firePointerOver(interaction: Interaction): boolean {\n  if (!interaction.object) return;\n  const state = interactive.interactionsState[interaction.object.uuid];\n  return !state.overFired;\n}\n\nfunction firePointerOut(interaction: Interaction): boolean {\n  if (!interaction.object) return;\n  const state = interactive.interactionsState[interaction.object.uuid];\n  return state.overFired && !state.outFired;\n}\n\nfunction firePointerDown(interaction: Interaction): boolean {\n  if (!interactive.pointerDown) return false;\n  if (!interaction.object) return;\n  const state = interactive.interactionsState[interaction.object.uuid];\n  return !state.downFired;\n}\n\nfunction firePointerUp(interaction: Interaction): boolean {\n  if (interactive.pointerDown) return false;\n  if (!interaction.object) return;\n  const state = interactive.interactionsState[interaction.object.uuid];\n  return state.downFired && !state.upFired;\n}\n\nfunction firePointerMove(interaction: Interaction): boolean {\n  return true;\n}\n\nconst interactive: Interactive = {\n  disabled: false,\n  enabled: true,\n  lastInteractionUuid: \"\",\n  interactions: [],\n  interactionsState: {},\n  pointerDown: false,\n  cleanUp: false,\n  cleanDown: false,\n  cleanMove: false,\n  create() {\n    function onMove() {\n      interactive.enabled = true;\n      interactive.cleanMove = true;\n    }\n\n    function onDown() {\n      interactive.enabled = true;\n      interactive.pointerDown = true;\n      interactive.cleanDown = true;\n    }\n\n    function onUp() {\n      interactive.pointerDown = false;\n      interactive.cleanUp = true;\n    }\n\n    window.addEventListener(\"pointermove\", onMove);\n    window.addEventListener(\"pointerdown\", onDown);\n    window.addEventListener(\"pointerup\", onUp);\n    return () => {\n      window.removeEventListener(\"pointermove\", onMove);\n      window.removeEventListener(\"pointerdown\", onDown);\n      window.removeEventListener(\"pointerup\", onUp);\n    };\n  },\n  add(interaction) {\n    if (!hasPointerEvent(interaction)) return;\n    const index = interactive.interactions.findIndex((item) => {\n      return item.object?.uuid === interaction.object?.uuid;\n    });\n    if (index === -1 && interaction.object) {\n      interactive.interactionsState[interaction.object.uuid] = {\n        downFired: false,\n        upFired: false,\n        overFired: false,\n        outFired: false,\n      };\n      interactive.interactions.push(interaction);\n    }\n  },\n  remove(uuid) {\n    const index = interactive.interactions.findIndex((item) => {\n      return item.uuid === uuid;\n    });\n    if (index > -1) {\n      interactive.interactions.splice(index, 1);\n      document.body.style.cursor = \"auto\";\n    }\n  },\n  handle(camera, raycaster) {\n    for (let i = 0, length = interactive.interactions.length; i < length; i++) {\n      const interaction = interactive.interactions[i];\n      if (!interaction.object) continue;\n      const intersects = raycaster.intersectObject(interaction.object, true);\n      if (intersects.length === 0) {\n        if (firePointerOut(interaction)) {\n          interactive.interactionsState[interaction.object.uuid].outFired =\n            true;\n          interactive.interactionsState[interaction.object.uuid].overFired =\n            false;\n          if (interaction.onPointerOut !== undefined) {\n            interaction.onPointerOut();\n            document.body.style.cursor = \"auto\";\n          }\n        }\n        continue;\n      }\n      const intersect = intersects[0];\n      if (firePointerOver(interaction)) {\n        interactive.interactionsState[interaction.object.uuid].overFired = true;\n        interactive.interactionsState[interaction.object.uuid].outFired = false;\n        if (interaction.onPointerOver !== undefined) {\n          interaction.onPointerOver(intersect);\n          document.body.style.cursor = \"pointer\";\n        }\n      }\n      if (firePointerDown(interaction)) {\n        interactive.interactionsState[interaction.object.uuid].downFired = true;\n        if (interaction.onPointerDown !== undefined) {\n          interaction.onPointerDown(intersect);\n        }\n      }\n      if (firePointerUp(interaction)) {\n        interactive.interactionsState[interaction.object.uuid].upFired = true;\n        if (interaction.onPointerUp !== undefined) {\n          interaction.onPointerUp(intersect);\n          document.body.style.cursor = \"auto\";\n        }\n      }\n      if (firePointerMove(interaction)) {\n        if (interaction.onPointerMove !== undefined) {\n          interaction.onPointerMove(intersect);\n        }\n      }\n    }\n  },\n  update(\n    camera: THREE.PerspectiveCamera,\n    raycaster: THREE.Raycaster,\n    controllers: XRController[]\n  ) {\n    if (!interactive.enabled || interactive.disabled) return;\n\n    if (controllers.length > 0) {\n      for (let i = 0, length = controllers.length; i < length; i++) {\n        if (controllers[i].inputSource.handedness !== \"right\") continue;\n        const controller = controllers[i].controller;\n        matrix.identity().extractRotation(controller.matrixWorld);\n        raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);\n        raycaster.ray.direction.set(0, 0, -1).applyMatrix4(matrix);\n      }\n      interactive.handle(camera, raycaster);\n    } else {\n      interactive.handle(camera, raycaster);\n    }\n\n    if (interactive.cleanUp && !interactive.pointerDown) {\n      interactive.cleanUp = false;\n      for (const uuid in interactive.interactionsState) {\n        if (!interactive.interactionsState.hasOwnProperty(uuid)) {\n          continue;\n        }\n        interactive.interactionsState[uuid].upFired = false;\n        interactive.interactionsState[uuid].downFired = false;\n      }\n    }\n\n    if (interactive.cleanDown && interactive.pointerDown) {\n      interactive.cleanDown = false;\n    }\n  },\n};\n\nexport default interactive;\n","import { RootState } from \"@react-three/fiber\";\nimport { XRController } from \"@react-three/xr\";\nimport interactive from \"./interactive\";\n\ntype Fn = (state: RootState) => void;\n\nconst updates = new Map<string, Fn>();\n\nexport default function update(state: RootState, controllers: XRController[]) {\n  updates.forEach((fn) => fn(state));\n  interactive.update(state.camera, state.raycaster, controllers);\n}\n\nupdate.add = (uuid: string, fn: Fn) => {\n  updates.set(uuid, fn);\n};\n\nupdate.remove = (uuid: string) => {\n  if (updates.has(uuid)) {\n    updates.delete(uuid);\n  }\n};\n"],"names":["Scene","children","controllers","useXR","state","useFrame","update","React","interactive","useXREvent","Example","room","BoxLineGeometry","translate","legacy","flat","linear","gl","alpha","XR","args","attach","geometry","color","makeDefault","position","target","style","bottom","left","padding","cursor","mode","sessionInit","optionalFeatures","ViewCode","pathname","rel","href","display","gap","insetInlineEnd","insetBlockStart","blockSize","alignItems","textDecoration","backgroundColor","paddingInline","paddingBlock","borderRadius","height","viewBox","width","xmlns","inlineSize","fill","d","fillRule","LayerContext","parentUuid","parentSize","currentChildren","renderOrder","addChild","removeChild","DEFAULT_BACKGROUND_POSITION","Layer","ref","zIndex","resolution","visible","autoLayout","opacity","backgroundImage","backgroundSize","backgroundPosition","borderWidth","borderColor","flexDirection","justifyContent","textContent","textAlign","justifyText","verticalAlign","fontFamily","fontSize","fontWeight","lineHeight","childIndex","onPointerMove","onPointerOver","onPointerOut","onPointerDown","onPointerUp","imageRendering","imageSmoothingEnabled","textRendering","dpr","props","groupRef","materialRef","childrenGroupRef","material","current","blending","THREE","group","test","console","log","layerContext","size","percent","parseFloat","isNaN","uuid","index","pointerRefs","object","ctx","document","createElement","getContext","canvas","s","window","devicePixelRatio","scale","Math","max","floor","canvasTexture","anisotropy","premultiplyAlpha","images","Image","src","w","h","d2r","PI","res","min","mapLinear","globalCompositeOperation","clearRect","isArray","Array","array","number","tl","tr","br","bl","beginPath","moveTo","lineTo","arc","closePath","globalAlpha","fillStyle","lineWidth","ox","oy","undefined","x","y","sx","sy","sw","sh","ir","cr","dw","dh","dx","dy","save","clip","drawImage","restore","canvasTxt","textBaseline","stroke","strokeStyle","needsUpdate","updateManager","setCurrentChildren","childGroupRefs","map","newSize","paddingX","paddingY","forEach","childGroupRef","childGroup","childrenWidth","reduce","child","childrenHeight","contentSize","axis","oppositeAxis","includes","length","isReverse","dir","spacing","i","layout","layerProviderValue","nextCurrentChildren","findIndex","value","push","sort","a","b","filter","childrenGroup","traverse","transparent","Provider","name","side","depthWrite","key","matrix","firePointerOver","interaction","interactionsState","overFired","firePointerOut","outFired","firePointerDown","pointerDown","downFired","firePointerUp","upFired","disabled","enabled","lastInteractionUuid","interactions","cleanUp","cleanDown","cleanMove","create","onMove","onDown","onUp","addEventListener","removeEventListener","add","hasPointerEvent","item","remove","splice","body","handle","camera","raycaster","intersects","intersectObject","intersect","inputSource","handedness","controller","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","set","applyMatrix4","hasOwnProperty","updates","Map","fn","has","delete"],"sourceRoot":""}
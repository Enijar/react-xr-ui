"use strict";(self.webpackChunkreact_xr_ui=self.webpackChunkreact_xr_ui||[]).push([[527],{180:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(294),a=n(369),i=n(977),l=n(638),o=n(521),u=n(989),s=n(581),c=n(254);function d(e){let{children:t}=e;return r.createElement(r.Fragment,null,t)}function h(e){let{children:t,optimizedRendering:n=!1}=e;const h=r.useMemo((()=>new a.d(6,6,6,10,10,10).translate(0,3,0)),[]);return r.createElement(r.Fragment,null,r.createElement(i.Xz,{legacy:!0,flat:!0,linear:!0,gl:{alpha:!1}},r.createElement(l.XR,null,r.createElement(c.Z,{fontFamily:"system-ui",optimizedRendering:n},r.createElement("color",{args:["#333333"],attach:"background"}),r.createElement("lineSegments",{geometry:h},r.createElement("lineBasicMaterial",{color:"#c0c0c0"})),r.createElement(u.c,{makeDefault:!0,position:[0,1.6,0]}),r.createElement(s.z,{makeDefault:!0,target:[0,1,-1.8]}),r.createElement("ambientLight",null),r.createElement(o.z,null),r.createElement(d,null,r.createElement("group",{position:[0,1,-1.88]},t))))),r.createElement(l.vZ,{style:{position:"absolute",bottom:"1em",color:"black",left:"50%",translate:"-50%",padding:"0.5em 1em",cursor:"pointer"},mode:"VR",sessionInit:{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}},"Enter Immersive VR"))}},518:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(294);function a(e){let{pathname:t}=e;return r.createElement("a",{target:"_blank",rel:"nofollow",href:"https://github.com/Enijar/react-xr-ui/tree/main/examples/examples/".concat(t,".tsx"),style:{display:"flex",gap:"1ch",position:"absolute",insetInlineEnd:"1em",insetBlockStart:"1em",blockSize:"2em",alignItems:"center",textDecoration:"none",backgroundColor:"#111111",paddingInline:"1em",paddingBlock:"0.5em",borderRadius:"0.25em",cursor:"pointer"}},r.createElement("span",null,"View Code"),r.createElement("svg",{height:"157.06",viewBox:"0 0 161.03 157.06",width:"161.03",xmlns:"http://www.w3.org/2000/svg",style:{inlineSize:"auto",blockSize:"100%"}},r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"m80.52 0c-44.47 0-80.52 36.05-80.52 80.52 0 35.57 23.07 65.76 55.06 76.4 4.02.75 5.5-1.75 5.5-3.87 0-1.92-.07-8.26-.11-14.99-22.4 4.87-27.13-9.5-27.13-9.5-3.66-9.31-8.94-11.78-8.94-11.78-7.31-5 .55-4.89.55-4.89 8.09.57 12.34 8.3 12.34 8.3 7.18 12.31 18.84 8.75 23.43 6.69.72-5.2 2.81-8.76 5.11-10.77-17.88-2.04-36.68-8.94-36.68-39.79 0-8.79 3.15-15.97 8.3-21.61-.84-2.03-3.59-10.22.78-21.31 0 0 6.76-2.16 22.15 8.25 6.42-1.78 13.31-2.68 20.15-2.71 6.84.03 13.74.93 20.17 2.71 15.37-10.42 22.12-8.25 22.12-8.25 4.38 11.09 1.63 19.28.79 21.31 5.16 5.64 8.29 12.82 8.29 21.61 0 30.93-18.84 37.73-36.77 39.73 2.89 2.5 5.46 7.4 5.46 14.91 0 10.77-.09 19.44-.09 22.1 0 2.14 1.45 4.65 5.53 3.86 31.97-10.66 55.02-40.83 55.02-76.39 0-44.48-36.05-80.53-80.51-80.53",fillRule:"evenodd"}),r.createElement("path",{d:"m30.5 115.61c-.18.4-.81.52-1.38.25-.58-.26-.91-.81-.72-1.21.17-.41.8-.53 1.39-.25.59.26.92.81.72 1.22"}),r.createElement("path",{d:"m33.76 119.24c-.38.36-1.13.19-1.64-.37-.53-.56-.63-1.31-.24-1.67.4-.35 1.12-.19 1.65.37.53.57.63 1.31.23 1.67z"}),r.createElement("path",{d:"m36.93 123.88c-.49.34-1.3.02-1.8-.69-.49-.72-.49-1.57.01-1.92.5-.34 1.29-.03 1.8.68.49.73.49 1.59-.01 1.94"}),r.createElement("path",{d:"m41.28 128.36c-.44.49-1.38.36-2.07-.31-.7-.65-.9-1.57-.46-2.06.45-.49 1.39-.35 2.09.31.7.65.91 1.58.44 2.06z"}),r.createElement("path",{d:"m47.28 130.96c-.19.63-1.1.92-2.01.65-.91-.28-1.51-1.01-1.32-1.65.19-.63 1.1-.93 2.02-.65.91.27 1.51 1.01 1.32 1.65"}),r.createElement("path",{d:"m53.87 131.44c.02.66-.75 1.21-1.71 1.23s-1.74-.52-1.75-1.17c0-.67.76-1.22 1.72-1.23.96-.02 1.74.51 1.74 1.17z"}),r.createElement("path",{d:"m60 130.4c.11.65-.55 1.31-1.5 1.49-.93.17-1.8-.23-1.92-.87-.12-.66.56-1.33 1.49-1.5.95-.17 1.8.22 1.93.88z"}))))}},634:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(462),a=n(294),i=n(477),l=n(561),o=n.n(l),u=n(738),s=n(254);const c=a.createContext({parentUuid:null,parentSize:{width:1,height:1},currentChildren:[],renderOrder:0,addChild(){},removeChild(){}}),d=[0,0],h=new Map;function m(e,t){let{optimizedRendering:n,zIndex:l=0,resolution:m,visible:p=!0,autoLayout:g=!0,premultiplyAlpha:f,depthTest:v,depthWrite:y=!1,width:w,height:E,aspectRatio:b,opacity:x=1,backgroundColor:M="transparent",backgroundImage:R,backgroundSize:k,backgroundPosition:C=d,alphaTest:z=0,padding:I=0,borderRadius:S=0,borderWidth:A=0,borderColor:P="transparent",flexDirection:T="row",alignItems:U="center",justifyContent:F="center",gap:O=0,textContent:D,textAlign:L="left",justifyText:B=!1,verticalAlign:Z="top",color:j="white",fontFamily:W,fontSize:_=.1,fontWeight:q="normal",lineHeight:N=null,childIndex:V,children:H,onPointerMove:X,onPointerOver:G,onPointerOut:J,onPointerDown:K,onPointerUp:Q,imageRendering:Y="crisp-edges",imageSmoothingEnabled:$=!0,textRendering:ee="auto",dpr:te,onLayout:ne,...re}=e;const ae=a.useRef(!0),[ie,le]=a.useState((()=>({opacity:x})));a.useEffect((()=>{le((e=>({...e,opacity:x})))}),[x]);const oe=a.useContext(s.q),ue=a.useMemo((()=>null!=m?m:oe.layerResolution),[m,oe.layerResolution]),se=a.useMemo((()=>null!=W?W:oe.fontFamily),[W,oe.fontFamily]),ce=a.useMemo((()=>null!=n?n:oe.optimizedRendering),[n,oe.optimizedRendering]),de=a.useRef(null),he=a.useRef(null),me=a.useRef(null),pe=a.useRef(null);a.useEffect((()=>{const e=me.current;null!==e&&(e.blending=i.CustomBlending)}),[]),a.useImperativeHandle(t,(()=>({group:de.current,mesh:he.current,material:me.current,setAttrs:le})));const ge=a.useContext(c),fe=a.useMemo((()=>{const e={width:1,height:1};if("string"==typeof w){const t=parseFloat(w);null===ge.parentUuid?e.width=t/100:isNaN(t)?e.width=1:e.width=ge.parentSize.width*(t/100)}else e.width=null!=w?w:1;if("string"==typeof E){const t=parseFloat(E);null===ge.parentUuid?e.height=t/100:isNaN(t)?e.height=1:e.height=ge.parentSize.height*(t/100)}else e.height=null!=E?E:1;return void 0!==b&&(void 0===w&&(e.width=e.height*b),void 0===E&&(e.height=e.width*b)),e}),[w,E,ge.parentUuid,ge.parentSize,b]),ve=a.useMemo((()=>i.MathUtils.generateUUID()),[]);a.useEffect((()=>{if(null!==ge.parentUuid)return ge.addChild({width:fe.width,height:fe.height,index:V,autoLayout:g,uuid:ve}),()=>{ge.removeChild(ve)}}),[fe,V,g,ge.parentUuid]);const ye=a.useRef({onPointerMove:X,onPointerOver:G,onPointerOut:J,onPointerDown:K,onPointerUp:Q});a.useMemo((()=>{ye.current.onPointerMove=X,ye.current.onPointerOver=G,ye.current.onPointerOut=J,ye.current.onPointerDown=K,ye.current.onPointerUp=Q}),[X,G,J,K,Q]);const we=a.useMemo((()=>0===["transparent"===M?void 0:M,R,"transparent"===P?void 0:P,D].filter((e=>void 0!==e)).length),[M,R,P,D]),Ee=a.useMemo((()=>we?null:document.createElement("canvas").getContext("2d")),[we]);a.useEffect((()=>{null!==Ee&&(Ee.imageSmoothingEnabled=$,Ee.canvas.style.imageRendering=Y)}),[Ee,Y,$]),a.useEffect((()=>{null!==Ee&&(Ee.textRendering=ee,Ee.canvas.style.textRendering=ee)}),[Ee,ee]),a.useMemo((()=>{var e;if(null===Ee)return;const t=null!==(e=null!=te?te:window.devicePixelRatio)&&void 0!==e?e:1;Ee.scale(t,t)}),[Ee,te]),a.useMemo((()=>{null!==Ee&&(Ee.canvas.width=Math.max(1,Math.floor(fe.width*ue)),Ee.canvas.height=Math.max(1,Math.floor(fe.height*ue)))}),[Ee,fe,ue]);const be=a.useMemo((()=>{if(null===Ee)return null;const e=new i.CanvasTexture(Ee.canvas);return e.anisotropy=16,e.premultiplyAlpha=!0,e}),[Ee,fe]);a.useEffect((()=>{null!==be&&(be.premultiplyAlpha=null!=f?f:oe.premultiplyAlpha)}),[be,f,oe.premultiplyAlpha]);const xe=a.useMemo((()=>({backgroundImage:new Image})),[]),[Me,Re]=a.useState(0),ke=a.useRef(!1);a.useEffect((()=>(ke.current=!0,()=>{ke.current=!1})),[]),a.useMemo((()=>{if(R){if(!h.has(R)){const e=new Image;e.onload=()=>{ke.current&&Re((e=>(e+1)%1e3))},e.src=R,h.set(R,e)}xe.backgroundImage=h.get(R)}}),[xe.backgroundImage,R]);const[Ce,ze]=a.useState([]);a.useEffect((()=>{ae.current=!0;const e=[];return e.push(requestAnimationFrame((()=>{e.push(requestAnimationFrame((()=>{ae.current=!ce})))}))),()=>{e.forEach((e=>{cancelAnimationFrame(e)}))}}),[Me,Ce,ce,Ee,fe,ue,S,P,ie,xe,M,C,k,se,_,N,L,Z,B,q,j,D]),(0,u.z)((()=>{if(ae.current&&null!==Ee){const e=Ee.canvas.width,t=Ee.canvas.height,n=Math.PI/180,r=Math.min(e,t),{mapLinear:a}=i.MathUtils;Ee.globalCompositeOperation="source-over",Ee.clearRect(0,0,e,t);{const a=Array.isArray(S),i=S,l=S;let[o=0,u=0,s=0,c=0]=a?i:[l,l,l,l];o*=r,u*=r,s*=r,c*=r,Ee.beginPath(),Ee.moveTo(o,0),Ee.lineTo(e-u,0),Ee.arc(e-u,u,u,270*n,360*n),Ee.lineTo(e,t-s),Ee.arc(e-s,t-s,s,0,90*n),Ee.lineTo(c,t),Ee.arc(c,t-c,c,90*n,180*n),Ee.lineTo(0,o),Ee.arc(o,o,o,180*n,270*n),Ee.closePath()}Ee.globalAlpha=ie.opacity,Ee.fillStyle=M,Ee.lineWidth=A*r*2,Ee.fill();const l=A*r,u=A*r;if(void 0!==R){const n=C[0],r=C[1],i=0,o=0,s=Math.max(1,xe.backgroundImage.width),c=Math.max(1,xe.backgroundImage.height),d=s/c,h=e/t;let m=s,p=c;switch(k){case"stretch":m=e,p=t;break;case"contain":m=e-2*l,p=t-2*u,d>=h?p=m/d:m=p*d;break;case"cover":m=e-2*l,p=t-2*u,d<=h?p=m/d:m=p*d}const g=l+a(n,0,1,0,e-2*l-m),f=u+a(r,0,1,0,t-2*u-p);Ee.save(),Ee.clip(),Ee.drawImage(xe.backgroundImage,i,o,s,c,g,f,m,p),Ee.restore()}void 0!==D&&(o().font=se,o().fontSize=_*Math.min(e,t),o().lineHeight=N*o().fontSize,o().align=L,o().vAlign=Z,o().justify=B,o().fontWeight=q,Ee.textBaseline="bottom",Ee.fillStyle=j,o().drawText(Ee,D,l,u,e-2*l,t-2*u)),Ee.globalCompositeOperation="destination-out",Ee.stroke(),Ee.globalCompositeOperation="source-over",Ee.save(),Ee.clip(),Ee.strokeStyle=P,Ee.stroke(),Ee.restore()}null!==be&&(be.needsUpdate=!0)}));const Ie=a.useMemo((()=>Ce.map((()=>a.createRef()))),[Ce]),Se=a.useRef(ne);a.useMemo((()=>{Se.current=ne}),[ne]),a.useEffect((()=>{var e,t,n,r;const a={...fe},i=Math.min(a.width,a.height),l=Array.isArray(I)?(null!==(e=I[1])&&void 0!==e?e:0)+(null!==(t=I[3])&&void 0!==t?t:0):I,o=Array.isArray(I)?(null!==(n=I[0])&&void 0!==n?n:0)+(null!==(r=I[2])&&void 0!==r?r:0):I;a.width-=i*A*2,a.height-=i*A*2,a.width-=i*l*2,a.height-=i*o*2,Ie.forEach(((e,t)=>{const n=e.current;if(null===n)return;let[r,i]=function(e){let{currentChildren:t,index:n,flexDirection:r,alignItems:a,justifyContent:i,gap:l,size:o}=e;const u=t.reduce(((e,t)=>t.autoLayout?e+t.width:e),0),s=t.reduce(((e,t)=>t.autoLayout?e+t.height:e),0);let c=0,d=0,h=u,m="width",p="height";["column","column-reverse"].includes(r)&&(m="height",p="width",h=s),t.length>0&&!["space-between","space-around"].includes(i)&&(h+=l*(t.length-1)),["space-between","space-around"].includes(i)&&(l=0);const g=["row-reverse","column-reverse"].includes(r);let f=1;switch(["column","column-reverse"].includes(r)&&(f=-1),i){case"start":c=(.5*(o[m]-t[n][m])-(o[m]-h))*f;break;case"end":c=(.5*o[m]-.5*t[n][m])*f;break;case"center":c=(.5*h-.5*t[n][m])*f;break;case"space-between":case"space-around":t.length>1&&(c=(.5*o[m]-.5*t[n][m])*f)}let v=0;if(t.length>1&&("space-between"===i&&(v=Math.max(0,o[m]-h)/Math.max(1,t.length-1)),"space-around"===i&&(v=Math.max(0,o[m]-h)/Math.max(1,t.length+1))),"space-around"===i&&(c-=v*f),g)for(let e=1;e<=n;e++){const n=t[e-1];n.autoLayout&&(c-=(n[m]+v+l)*f)}else for(let e=t.length-2;e>=n;e--)t[e+1].autoLayout&&(c-=(t[e+1][m]+v+l)*f);switch(a){case"start":d=(.5*o[p]-.5*t[n][p])*f;break;case"end":d=(.5*t[n][p]-.5*o[p])*f;break;case"center":d=0}return["column","column-reverse"].includes(r)?[d,c]:[c,d]}({currentChildren:Ce,index:t,flexDirection:T,alignItems:U,justifyContent:F,gap:O,size:a});Ce[t].autoLayout||(r=0,i=0),n.position.x=r,n.position.y=i})),Se.current&&Se.current()}),[Ie,Ce,fe,T,U,F,A,I,O]);const Ae=a.useMemo((()=>null===ge.parentUuid?l:ge.renderOrder+l+1),[ge.parentUuid,ge.renderOrder,l]),Pe=a.useMemo((()=>{var e;return null!==(e=oe.alphaTest)&&void 0!==e?e:z}),[oe.alphaTest,z]),Te=a.useMemo((()=>({currentChildren:Ce,parentSize:fe,parentUuid:ve,renderOrder:Ae,addChild(e){ze((t=>{const n=[...t],r=t.findIndex((t=>t.uuid===e.uuid));return-1===r?n.push({...e}):n[r]={...e},n.sort(((e,t)=>e.index-t.index))}))},removeChild(e){ze((t=>t.filter((t=>t.uuid!==e))))}})),[Ce,ve,fe,Ae]);return a.useEffect((()=>{const e=pe.current;null!==e&&e.traverse((e=>{e instanceof i.Mesh&&e.material instanceof i.Material&&(e.material.transparent=!0,e.material.opacity=ie.opacity,e.material.needsUpdate=!0)}))}),[ie.opacity]),a.useEffect((()=>()=>{null!==Ee&&(Ee.canvas.width=0,Ee.canvas.height=0)}),[Ee]),a.createElement(c.Provider,{value:Te},a.createElement("group",(0,r.Z)({ref:de},re,{visible:p,name:"react-xr-ui-layer"}),a.createElement("mesh",{ref:he,renderOrder:Ae+l,visible:null!==be},a.createElement("planeGeometry",{args:[fe.width,fe.height]}),a.createElement("meshBasicMaterial",{ref:me,side:i.FrontSide,opacity:ie.opacity,transparent:!0,depthTest:null!=v?v:oe.depthTest,depthWrite:y,alphaTest:Pe,map:null!=be?be:void 0})),a.createElement("group",{renderOrder:Ae+l+1,ref:pe},a.Children.map(H,((e,t)=>a.isValidElement(e)?a.createElement("group",{key:t,ref:Ie[t]},a.cloneElement(e,{...e.props,childIndex:t})):e)))))}var p=a.forwardRef(m)},254:function(e,t,n){n.d(t,{Z:function(){return i},q:function(){return a}});var r=n(294);const a=r.createContext({layerResolution:1024,fontFamily:"system-ui, sans-serif",optimizedRendering:!1,alphaTest:0,depthTest:!0,premultiplyAlpha:!0});function i(e){let{children:t,layerResolution:n=1024,fontFamily:i,optimizedRendering:l=!1,alphaTest:o,depthTest:u=!0,premultiplyAlpha:s=!1}=e;return r.createElement(a.Provider,{value:{layerResolution:n,fontFamily:i,optimizedRendering:l,alphaTest:o,depthTest:u,premultiplyAlpha:s}},t)}}}]);
//# sourceMappingURL=527.c7217bc2.chunk.js.map
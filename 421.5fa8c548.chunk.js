"use strict";(self.webpackChunkreact_xr_ui=self.webpackChunkreact_xr_ui||[]).push([[421],{228:function(e,t,n){n.d(t,{Z:function(){return p}});var o=n(462),r=n(294),i=n(477),a=n(561),c=n.n(a);let l=-1;var u=n(513),s=n(71);const d=r.createContext({parentUuid:null,parentSize:{width:1,height:1},currentChildren:[],addChild(){},removeChild(){}}),h=[0,0];function m(e,t){let{zIndex:n=0,resolution:a=1024,visible:m=!0,autoLayout:p=!0,width:f,height:g,opacity:v=1,backgroundColor:w="transparent",backgroundImage:b,backgroundSize:y,backgroundPosition:E=h,padding:x=0,borderRadius:P=0,borderWidth:M=0,borderColor:S="transparent",flexDirection:k="row",alignItems:C="center",justifyContent:D="center",gap:j=0,textContent:U,textAlign:I="left",justifyText:F=!1,verticalAlign:z="top",color:O="white",fontFamily:Z="system-ui, sans-serif",fontSize:L=.1,fontWeight:R="normal",lineHeight:A=null,childIndex:T,children:B,onPointerMove:W,onPointerOver:_,onPointerOut:H,onPointerDown:N,onPointerUp:V,...X}=e;const G=r.useMemo((()=>++l),[]),q=r.useRef(null),J=r.useRef(null),K=r.useRef(null);r.useEffect((()=>{const e=J.current;null!==e&&(e.blending=i.CustomBlending)}),[]),r.useImperativeHandle(t,(()=>({group:q.current,test(){console.log("Test")}})));const Q=r.useContext(d),Y=r.useMemo((()=>{const e={width:1,height:1};if("string"==typeof f){const t=parseFloat(f);null===Q.parentUuid?e.width=t/100:isNaN(t)?e.width=1:e.width=Q.parentSize.width*(t/100)}else e.width=null!=f?f:1;if("string"==typeof g){const t=parseFloat(g);null===Q.parentUuid?e.height=t/100:isNaN(t)?e.height=1:e.height=Q.parentSize.height*(t/100)}else e.height=null!=g?g:1;return e}),[f,g,Q.parentUuid,Q.parentSize]),$=r.useMemo((()=>i.MathUtils.generateUUID()),[]);r.useEffect((()=>{if(null!==Q.parentUuid)return Q.addChild({width:Y.width,height:Y.height,index:T,autoLayout:p,uuid:$}),()=>{Q.removeChild($)}}),[Y,T,p,Q.parentUuid]);const ee=r.useRef({onPointerMove:W,onPointerOver:_,onPointerOut:H,onPointerDown:N,onPointerUp:V});r.useMemo((()=>{ee.current.onPointerMove=W,ee.current.onPointerOver=_,ee.current.onPointerOut=H,ee.current.onPointerDown=N,ee.current.onPointerUp=V}),[W,_,H,N,V]),r.useLayoutEffect((()=>(s.Z.add({uuid:$,object:q.current,onPointerMove:ee.current.onPointerMove,onPointerOver:ee.current.onPointerOver,onPointerOut:ee.current.onPointerOut,onPointerDown:ee.current.onPointerDown,onPointerUp:ee.current.onPointerUp}),()=>{s.Z.remove($)})),[$]);const te=r.useMemo((()=>document.createElement("canvas").getContext("2d")),[]);r.useMemo((()=>{te.canvas.width=Math.max(1,Math.floor(Y.width*a)),te.canvas.height=Math.max(1,Math.floor(Y.height*a))}),[te.canvas,Y,a]);const ne=r.useMemo((()=>{const e=new i.CanvasTexture(te.canvas);return e.anisotropy=16,e.premultiplyAlpha=!0,e}),[te.canvas,Y]),oe=r.useMemo((()=>({backgroundImage:new Image})),[]);r.useMemo((()=>{b&&(oe.backgroundImage.src=b)}),[oe.backgroundImage,b]);const re=r.useCallback((()=>{const e=te.canvas.width,t=te.canvas.height,n=Math.PI/180,o=Math.min(e,t),{mapLinear:r}=i.MathUtils;te.globalCompositeOperation="source-over",te.clearRect(0,0,e,t);{const r=Array.isArray(P),i=P,a=P;let[c=0,l=0,u=0,s=0]=r?i:[a,a,a,a];c*=o,l*=o,u*=o,s*=o,te.beginPath(),te.moveTo(c,0),te.lineTo(e-l,0),te.arc(e-l,l,l,270*n,360*n),te.lineTo(e,t-u),te.arc(e-u,t-u,u,0,90*n),te.lineTo(s,t),te.arc(s,t-s,s,90*n,180*n),te.lineTo(0,c),te.arc(c,c,c,180*n,270*n),te.closePath()}te.globalAlpha=v,te.fillStyle=w,te.lineWidth=M*o*2,te.fill();const a=M*o,l=M*o;if(void 0!==b){const n=E[0],o=E[1],i=0,c=0,u=Math.max(1,oe.backgroundImage.width),s=Math.max(1,oe.backgroundImage.height),d=u/s,h=e/t;let m=u,p=s;switch(y){case"stretch":m=e,p=t;break;case"contain":m=e-2*a,p=t-2*l,d>=h?p=m/d:m=p*d;break;case"cover":m=e-2*a,p=t-2*l,d<=h?p=m/d:m=p*d}const f=a+r(n,0,1,0,e-2*a-m),g=l+r(o,0,1,0,t-2*l-p);te.save(),te.clip(),te.drawImage(oe.backgroundImage,i,c,u,s,f,g,m,p),te.restore()}void 0!==U&&(c().font=Z,c().fontSize=L*Math.min(e,t),c().lineHeight=A*c().fontSize,c().align=I,c().vAlign=z,c().justify=F,c().fontWeight=R,te.textBaseline="bottom",te.fillStyle=O,c().drawText(te,U,a,l,e-2*a,t-2*l)),te.globalCompositeOperation="destination-out",te.stroke(),te.globalCompositeOperation="source-over",te.save(),te.clip(),te.strokeStyle=S,te.stroke(),te.restore(),ne.needsUpdate=!0}),[te,oe,M,P,S,b,w,E,y,ne,R,L,Z,L,A,D,z,I,U,O]);r.useEffect((()=>(u.Z.add($,re),()=>u.Z.remove($))),[$,re]);const[ie,ae]=r.useState([]),ce=r.useMemo((()=>ie.map((()=>r.createRef()))),[ie]);r.useEffect((()=>{var e,t,n,o;const r=Math.min(Y.width,Y.height),i=Array.isArray(x)?(null!==(e=x[1])&&void 0!==e?e:0)+(null!==(t=x[3])&&void 0!==t?t:0):x,a=Array.isArray(x)?(null!==(n=x[0])&&void 0!==n?n:0)+(null!==(o=x[2])&&void 0!==o?o:0):x;Y.width-=r*M*2,Y.height-=r*M*2,Y.width-=r*i*2,Y.height-=r*a*2,ce.forEach(((e,t)=>{let[n,o]=function(e){let{currentChildren:t,index:n,flexDirection:o,alignItems:r,justifyContent:i,gap:a,size:c}=e;const l=t.reduce(((e,t)=>t.autoLayout?e+t.width:e),0),u=t.reduce(((e,t)=>t.autoLayout?e+t.height:e),0);let s=0,d=0,h=l,m="width",p="height";["column","column-reverse"].includes(o)&&(m="height",p="width",h=u),t.length>0&&!["space-between","space-around"].includes(i)&&(h+=a*(t.length-1)),["space-between","space-around"].includes(i)&&(a=0);const f=["row-reverse","column-reverse"].includes(o);let g=1;switch(["column","column-reverse"].includes(o)&&(g=-1),i){case"start":s=(.5*(c[m]-t[n][m])-(c[m]-h))*g;break;case"end":s=(.5*c[m]-.5*t[n][m])*g;break;case"center":s=(.5*h-.5*t[n][m])*g;break;case"space-between":case"space-around":t.length>1&&(s=(.5*c[m]-.5*t[n][m])*g)}let v=0;if(t.length>1&&("space-between"===i&&(v=Math.max(0,c[m]-h)/Math.max(1,t.length-1)),"space-around"===i&&(v=Math.max(0,c[m]-h)/Math.max(1,t.length+1))),"space-around"===i&&(s-=v*g),f)for(let e=1;e<=n;e++){const n=t[e-1];n.autoLayout&&(s-=(n[m]+v+a)*g)}else for(let e=t.length-2;e>=n;e--)t[e+1].autoLayout&&(s-=(t[e+1][m]+v+a)*g);switch(r){case"start":d=(.5*c[p]-.5*t[n][p])*g;break;case"end":d=(.5*t[n][p]-.5*c[p])*g;break;case"center":d=0}return["column","column-reverse"].includes(o)?[d,s]:[s,d]}({currentChildren:ie,index:t,flexDirection:k,alignItems:C,justifyContent:D,gap:j,size:Y});ie[t].autoLayout||(n=0,o=0),e.current.position.x=n,e.current.position.y=o}))}),[ce,ie,Y,k,C,D,M,x,j]);const le=r.useMemo((()=>({currentChildren:ie,parentSize:Y,parentUuid:$,addChild(e){ae((t=>{const n=[...t],o=t.findIndex((t=>t.uuid===e.uuid));return-1===o?n.push({...e}):n[o]={...e},n.sort(((e,t)=>e.index-t.index))}))},removeChild(e){ae((t=>t.filter((t=>t.uuid!==e))))}})),[ie,$,Y]);return r.useEffect((()=>{const e=K.current;null!==e&&e.traverse((e=>{e instanceof i.Mesh&&e.material instanceof i.Material&&(e.material.transparent=!0,e.material.opacity=v,e.material.needsUpdate=!0)}))}),[v]),r.createElement(d.Provider,{value:le},r.createElement("group",(0,o.Z)({ref:q},X,{visible:m}),r.createElement("mesh",{renderOrder:G+n},r.createElement("planeGeometry",{args:[Y.width,Y.height]}),r.createElement("meshBasicMaterial",{ref:J,side:i.FrontSide,opacity:v,transparent:!0,depthWrite:!1,map:ne})),r.createElement("group",{renderOrder:G+n+1,ref:K},r.Children.map(B,((e,t)=>r.isValidElement(e)?r.createElement("group",{key:t,ref:ce[t]},r.cloneElement(e,{...e.props,childIndex:t})):e)))))}var p=r.forwardRef(m)},71:function(e,t,n){const o=new(n(477).Matrix4);function r(e){if(e.object)return!l.interactionsState[e.object.uuid].overFired}function i(e){if(!e.object)return;const t=l.interactionsState[e.object.uuid];return t.overFired&&!t.outFired}function a(e){return!!l.pointerDown&&(e.object?!l.interactionsState[e.object.uuid].downFired:void 0)}function c(e){if(l.pointerDown)return!1;if(!e.object)return;const t=l.interactionsState[e.object.uuid];return t.downFired&&!t.upFired}const l={disabled:!1,enabled:!0,lastInteractionUuid:"",interactions:[],interactionsState:{},pointerDown:!1,cleanUp:!1,cleanDown:!1,cleanMove:!1,create(){function e(){l.enabled=!0,l.cleanMove=!0}function t(){l.enabled=!0,l.pointerDown=!0,l.cleanDown=!0}function n(){l.pointerDown=!1,l.cleanUp=!0}return window.addEventListener("pointermove",e),window.addEventListener("pointerdown",t),window.addEventListener("pointerup",n),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerdown",t),window.removeEventListener("pointerup",n)}},add(e){(function(e){return void 0!==e.onPointerMove||void 0!==e.onPointerOver||void 0!==e.onPointerOut||void 0!==e.onPointerDown||void 0!==e.onPointerUp})(e)&&-1===l.interactions.findIndex((t=>{var n,o;return(null===(n=t.object)||void 0===n?void 0:n.uuid)===(null===(o=e.object)||void 0===o?void 0:o.uuid)}))&&e.object&&(l.interactionsState[e.object.uuid]={downFired:!1,upFired:!1,overFired:!1,outFired:!1},l.interactions.push(e))},remove(e){const t=l.interactions.findIndex((t=>t.uuid===e));t>-1&&(l.interactions.splice(t,1),document.body.style.cursor="auto")},handle(e,t){for(let e=0,n=l.interactions.length;e<n;e++){const n=l.interactions[e];if(!n.object)continue;const o=t.intersectObject(n.object,!0);if(0===o.length){i(n)&&(l.interactionsState[n.object.uuid].outFired=!0,l.interactionsState[n.object.uuid].overFired=!1,void 0!==n.onPointerOut&&(n.onPointerOut(),document.body.style.cursor="auto"));continue}const u=o[0];r(n)&&(l.interactionsState[n.object.uuid].overFired=!0,l.interactionsState[n.object.uuid].outFired=!1,void 0!==n.onPointerOver&&(n.onPointerOver(u),document.body.style.cursor="pointer")),a(n)&&(l.interactionsState[n.object.uuid].downFired=!0,void 0!==n.onPointerDown&&n.onPointerDown(u)),c(n)&&(l.interactionsState[n.object.uuid].upFired=!0,void 0!==n.onPointerUp&&(n.onPointerUp(u),document.body.style.cursor="auto")),void 0!==n.onPointerMove&&n.onPointerMove(u)}},update(e,t,n){if(l.enabled&&!l.disabled){if(n.length>0){for(let e=0,r=n.length;e<r;e++){if("right"!==n[e].inputSource.handedness)continue;const r=n[e].controller;o.identity().extractRotation(r.matrixWorld),t.ray.origin.setFromMatrixPosition(r.matrixWorld),t.ray.direction.set(0,0,-1).applyMatrix4(o)}l.handle(e,t)}else l.handle(e,t);if(l.cleanUp&&!l.pointerDown){l.cleanUp=!1;for(const e in l.interactionsState)l.interactionsState.hasOwnProperty(e)&&(l.interactionsState[e].upFired=!1,l.interactionsState[e].downFired=!1)}l.cleanDown&&l.pointerDown&&(l.cleanDown=!1)}}};t.Z=l},513:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(71);const r=new Map;function i(e,t){r.forEach((t=>t(e))),o.Z.update(e.camera,e.raycaster,t)}i.add=(e,t)=>{r.set(e,t)},i.remove=e=>{r.has(e)&&r.delete(e)}},291:function(e,t,n){n.d(t,{Z:function(){return f}});var o=n(294),r=n(369),i=n(738),a=n(977),c=n(747),l=n(96),u=n(521),s=n(989),d=n(581),h=n(513),m=n(71);function p(e){let{children:t}=e;const n=(0,c.nH)((e=>e.controllers));return(0,i.z)((e=>{(0,h.Z)(e,n)})),o.useEffect((()=>m.Z.create()),[]),(0,l.c)("selectstart",(()=>{m.Z.enabled=!0,m.Z.pointerDown=!0,m.Z.cleanDown=!0})),(0,l.c)("selectend",(()=>{m.Z.pointerDown=!1,m.Z.cleanUp=!0})),o.createElement(o.Fragment,null,t)}function f(e){let{children:t}=e;const n=o.useMemo((()=>new r.d(6,6,6,10,10,10).translate(0,3,0)),[]);return o.createElement(a.Xz,{legacy:!0,flat:!0,linear:!0,gl:{alpha:!1}},o.createElement(c.XR,null,o.createElement("color",{args:["#333333"],attach:"background"}),o.createElement("lineSegments",{geometry:n},o.createElement("lineBasicMaterial",{color:"#c0c0c0"})),o.createElement(s.c,{makeDefault:!0,position:[0,1.6,0]}),o.createElement(d.z,{makeDefault:!0,target:[0,1,-1.8]}),o.createElement("ambientLight",null),o.createElement(u.z,null),o.createElement(p,null,o.createElement("group",{position:[0,1,-1.88]},t))))}},487:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(294);function r(e){let{pathname:t}=e;return o.createElement("a",{target:"_blank",rel:"nofollow",href:"https://github.com/Enijar/react-xr-ui/tree/main/src/examples/".concat(t,".tsx"),style:{display:"flex",gap:"1ch",position:"absolute",insetInlineEnd:"1em",insetBlockStart:"1em",blockSize:"2em",alignItems:"center",textDecoration:"none",backgroundColor:"#111111",paddingInline:"1em",paddingBlock:"0.5em",borderRadius:"0.25em",cursor:"pointer"}},o.createElement("span",null,"View Code"),o.createElement("svg",{height:"157.06",viewBox:"0 0 161.03 157.06",width:"161.03",xmlns:"http://www.w3.org/2000/svg",style:{inlineSize:"auto",blockSize:"100%"}},o.createElement("g",{fill:"currentColor"},o.createElement("path",{d:"m80.52 0c-44.47 0-80.52 36.05-80.52 80.52 0 35.57 23.07 65.76 55.06 76.4 4.02.75 5.5-1.75 5.5-3.87 0-1.92-.07-8.26-.11-14.99-22.4 4.87-27.13-9.5-27.13-9.5-3.66-9.31-8.94-11.78-8.94-11.78-7.31-5 .55-4.89.55-4.89 8.09.57 12.34 8.3 12.34 8.3 7.18 12.31 18.84 8.75 23.43 6.69.72-5.2 2.81-8.76 5.11-10.77-17.88-2.04-36.68-8.94-36.68-39.79 0-8.79 3.15-15.97 8.3-21.61-.84-2.03-3.59-10.22.78-21.31 0 0 6.76-2.16 22.15 8.25 6.42-1.78 13.31-2.68 20.15-2.71 6.84.03 13.74.93 20.17 2.71 15.37-10.42 22.12-8.25 22.12-8.25 4.38 11.09 1.63 19.28.79 21.31 5.16 5.64 8.29 12.82 8.29 21.61 0 30.93-18.84 37.73-36.77 39.73 2.89 2.5 5.46 7.4 5.46 14.91 0 10.77-.09 19.44-.09 22.1 0 2.14 1.45 4.65 5.53 3.86 31.97-10.66 55.02-40.83 55.02-76.39 0-44.48-36.05-80.53-80.51-80.53",fillRule:"evenodd"}),o.createElement("path",{d:"m30.5 115.61c-.18.4-.81.52-1.38.25-.58-.26-.91-.81-.72-1.21.17-.41.8-.53 1.39-.25.59.26.92.81.72 1.22"}),o.createElement("path",{d:"m33.76 119.24c-.38.36-1.13.19-1.64-.37-.53-.56-.63-1.31-.24-1.67.4-.35 1.12-.19 1.65.37.53.57.63 1.31.23 1.67z"}),o.createElement("path",{d:"m36.93 123.88c-.49.34-1.3.02-1.8-.69-.49-.72-.49-1.57.01-1.92.5-.34 1.29-.03 1.8.68.49.73.49 1.59-.01 1.94"}),o.createElement("path",{d:"m41.28 128.36c-.44.49-1.38.36-2.07-.31-.7-.65-.9-1.57-.46-2.06.45-.49 1.39-.35 2.09.31.7.65.91 1.58.44 2.06z"}),o.createElement("path",{d:"m47.28 130.96c-.19.63-1.1.92-2.01.65-.91-.28-1.51-1.01-1.32-1.65.19-.63 1.1-.93 2.02-.65.91.27 1.51 1.01 1.32 1.65"}),o.createElement("path",{d:"m53.87 131.44c.02.66-.75 1.21-1.71 1.23s-1.74-.52-1.75-1.17c0-.67.76-1.22 1.72-1.23.96-.02 1.74.51 1.74 1.17z"}),o.createElement("path",{d:"m60 130.4c.11.65-.55 1.31-1.5 1.49-.93.17-1.8-.23-1.92-.87-.12-.66.56-1.33 1.49-1.5.95-.17 1.8.22 1.93.88z"}))))}}}]);
//# sourceMappingURL=421.5fa8c548.chunk.js.map
"use strict";(self.webpackChunkreact_xr_ui=self.webpackChunkreact_xr_ui||[]).push([[527],{180:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(294),o=n(369),i=n(738),a=n(977),c=n(747),l=n(96),u=n(521),s=n(989),d=n(581),h=n(549),m=n(489);function p(e){let{children:t}=e;const n=(0,c.nH)((e=>e.controllers));return(0,i.z)((e=>{(0,h.Z)(e,n)})),r.useEffect((()=>m.Z.create()),[]),(0,l.c)("selectstart",(()=>{m.Z.enabled=!0,m.Z.pointerDown=!0,m.Z.cleanDown=!0})),(0,l.c)("selectend",(()=>{m.Z.pointerDown=!1,m.Z.cleanUp=!0})),r.createElement(r.Fragment,null,t)}function f(e){let{children:t}=e;const n=r.useMemo((()=>new o.d(6,6,6,10,10,10).translate(0,3,0)),[]);return r.createElement(r.Fragment,null,r.createElement(a.Xz,{legacy:!0,flat:!0,linear:!0,gl:{alpha:!1}},r.createElement(c.XR,null,r.createElement("color",{args:["#333333"],attach:"background"}),r.createElement("lineSegments",{geometry:n},r.createElement("lineBasicMaterial",{color:"#c0c0c0"})),r.createElement(s.c,{makeDefault:!0,position:[0,1.6,0]}),r.createElement(d.z,{makeDefault:!0,target:[0,1,-1.8]}),r.createElement("ambientLight",null),r.createElement(u.z,null),r.createElement(p,null,r.createElement("group",{position:[0,1,-1.88]},t)))),r.createElement(c.vZ,{style:{position:"absolute",bottom:"1em",color:"black",left:"50%",translate:"-50%",padding:"0.5em 1em",cursor:"pointer"},mode:"VR",sessionInit:{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}},"Enter Immersive VR"))}},518:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(294);function o(e){let{pathname:t}=e;return r.createElement("a",{target:"_blank",rel:"nofollow",href:"https://github.com/Enijar/react-xr-ui/tree/main/examples/examples/".concat(t,".tsx"),style:{display:"flex",gap:"1ch",position:"absolute",insetInlineEnd:"1em",insetBlockStart:"1em",blockSize:"2em",alignItems:"center",textDecoration:"none",backgroundColor:"#111111",paddingInline:"1em",paddingBlock:"0.5em",borderRadius:"0.25em",cursor:"pointer"}},r.createElement("span",null,"View Code"),r.createElement("svg",{height:"157.06",viewBox:"0 0 161.03 157.06",width:"161.03",xmlns:"http://www.w3.org/2000/svg",style:{inlineSize:"auto",blockSize:"100%"}},r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"m80.52 0c-44.47 0-80.52 36.05-80.52 80.52 0 35.57 23.07 65.76 55.06 76.4 4.02.75 5.5-1.75 5.5-3.87 0-1.92-.07-8.26-.11-14.99-22.4 4.87-27.13-9.5-27.13-9.5-3.66-9.31-8.94-11.78-8.94-11.78-7.31-5 .55-4.89.55-4.89 8.09.57 12.34 8.3 12.34 8.3 7.18 12.31 18.84 8.75 23.43 6.69.72-5.2 2.81-8.76 5.11-10.77-17.88-2.04-36.68-8.94-36.68-39.79 0-8.79 3.15-15.97 8.3-21.61-.84-2.03-3.59-10.22.78-21.31 0 0 6.76-2.16 22.15 8.25 6.42-1.78 13.31-2.68 20.15-2.71 6.84.03 13.74.93 20.17 2.71 15.37-10.42 22.12-8.25 22.12-8.25 4.38 11.09 1.63 19.28.79 21.31 5.16 5.64 8.29 12.82 8.29 21.61 0 30.93-18.84 37.73-36.77 39.73 2.89 2.5 5.46 7.4 5.46 14.91 0 10.77-.09 19.44-.09 22.1 0 2.14 1.45 4.65 5.53 3.86 31.97-10.66 55.02-40.83 55.02-76.39 0-44.48-36.05-80.53-80.51-80.53",fillRule:"evenodd"}),r.createElement("path",{d:"m30.5 115.61c-.18.4-.81.52-1.38.25-.58-.26-.91-.81-.72-1.21.17-.41.8-.53 1.39-.25.59.26.92.81.72 1.22"}),r.createElement("path",{d:"m33.76 119.24c-.38.36-1.13.19-1.64-.37-.53-.56-.63-1.31-.24-1.67.4-.35 1.12-.19 1.65.37.53.57.63 1.31.23 1.67z"}),r.createElement("path",{d:"m36.93 123.88c-.49.34-1.3.02-1.8-.69-.49-.72-.49-1.57.01-1.92.5-.34 1.29-.03 1.8.68.49.73.49 1.59-.01 1.94"}),r.createElement("path",{d:"m41.28 128.36c-.44.49-1.38.36-2.07-.31-.7-.65-.9-1.57-.46-2.06.45-.49 1.39-.35 2.09.31.7.65.91 1.58.44 2.06z"}),r.createElement("path",{d:"m47.28 130.96c-.19.63-1.1.92-2.01.65-.91-.28-1.51-1.01-1.32-1.65.19-.63 1.1-.93 2.02-.65.91.27 1.51 1.01 1.32 1.65"}),r.createElement("path",{d:"m53.87 131.44c.02.66-.75 1.21-1.71 1.23s-1.74-.52-1.75-1.17c0-.67.76-1.22 1.72-1.23.96-.02 1.74.51 1.74 1.17z"}),r.createElement("path",{d:"m60 130.4c.11.65-.55 1.31-1.5 1.49-.93.17-1.8-.23-1.92-.87-.12-.66.56-1.33 1.49-1.5.95-.17 1.8.22 1.93.88z"}))))}},634:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(462),o=n(294),i=n(477),a=n(561),c=n.n(a),l=n(549),u=n(489);const s=o.createContext({parentUuid:null,parentSize:{width:1,height:1},currentChildren:[],renderOrder:0,addChild(){},removeChild(){}}),d=[0,0];function h(e,t){let{zIndex:n=0,resolution:a=1024,visible:h=!0,autoLayout:m=!0,width:p,height:f,opacity:g=1,backgroundColor:v="transparent",backgroundImage:w,backgroundSize:b,backgroundPosition:y=d,padding:E=0,borderRadius:x=0,borderWidth:P=0,borderColor:M="transparent",flexDirection:k="row",alignItems:S="center",justifyContent:C="center",gap:D=0,textContent:U,textAlign:j="left",justifyText:I=!1,verticalAlign:O="top",color:F="white",fontFamily:z="system-ui, sans-serif",fontSize:Z=.1,fontWeight:L="normal",lineHeight:R=null,childIndex:A,children:T,onPointerMove:B,onPointerOver:W,onPointerOut:_,onPointerDown:H,onPointerUp:N,imageRendering:V="crisp-edges",...X}=e;const G=o.useRef(null),q=o.useRef(null),J=o.useRef(null);o.useEffect((()=>{const e=q.current;null!==e&&(e.blending=i.CustomBlending)}),[]),o.useImperativeHandle(t,(()=>({group:G.current,test(){console.log("Test")}})));const K=o.useContext(s),Q=o.useMemo((()=>{const e={width:1,height:1};if("string"==typeof p){const t=parseFloat(p);null===K.parentUuid?e.width=t/100:isNaN(t)?e.width=1:e.width=K.parentSize.width*(t/100)}else e.width=null!=p?p:1;if("string"==typeof f){const t=parseFloat(f);null===K.parentUuid?e.height=t/100:isNaN(t)?e.height=1:e.height=K.parentSize.height*(t/100)}else e.height=null!=f?f:1;return e}),[p,f,K.parentUuid,K.parentSize]),Y=o.useMemo((()=>i.MathUtils.generateUUID()),[]);o.useEffect((()=>{if(null!==K.parentUuid)return K.addChild({width:Q.width,height:Q.height,index:A,autoLayout:m,uuid:Y}),()=>{K.removeChild(Y)}}),[Q,A,m,K.parentUuid]);const $=o.useRef({onPointerMove:B,onPointerOver:W,onPointerOut:_,onPointerDown:H,onPointerUp:N});o.useMemo((()=>{$.current.onPointerMove=B,$.current.onPointerOver=W,$.current.onPointerOut=_,$.current.onPointerDown=H,$.current.onPointerUp=N}),[B,W,_,H,N]),o.useLayoutEffect((()=>(u.Z.add({uuid:Y,object:G.current,onPointerMove:$.current.onPointerMove,onPointerOver:$.current.onPointerOver,onPointerOut:$.current.onPointerOut,onPointerDown:$.current.onPointerDown,onPointerUp:$.current.onPointerUp}),()=>{u.Z.remove(Y)})),[Y]);const ee=o.useMemo((()=>document.createElement("canvas").getContext("2d")),[]);o.useEffect((()=>{ee.canvas.style.imageRendering=V}),[ee,V]),o.useMemo((()=>{ee.canvas.width=Math.max(1,Math.floor(Q.width*a)),ee.canvas.height=Math.max(1,Math.floor(Q.height*a))}),[ee.canvas,Q,a]);const te=o.useMemo((()=>{const e=new i.CanvasTexture(ee.canvas);return e.anisotropy=16,e.premultiplyAlpha=!0,e}),[ee.canvas,Q]),ne=o.useMemo((()=>({backgroundImage:new Image})),[]);o.useMemo((()=>{w&&(ne.backgroundImage.src=w)}),[ne.backgroundImage,w]);const re=o.useCallback((()=>{const e=ee.canvas.width,t=ee.canvas.height,n=Math.PI/180,r=Math.min(e,t),{mapLinear:o}=i.MathUtils;ee.globalCompositeOperation="source-over",ee.clearRect(0,0,e,t);{const o=Array.isArray(x),i=x,a=x;let[c=0,l=0,u=0,s=0]=o?i:[a,a,a,a];c*=r,l*=r,u*=r,s*=r,ee.beginPath(),ee.moveTo(c,0),ee.lineTo(e-l,0),ee.arc(e-l,l,l,270*n,360*n),ee.lineTo(e,t-u),ee.arc(e-u,t-u,u,0,90*n),ee.lineTo(s,t),ee.arc(s,t-s,s,90*n,180*n),ee.lineTo(0,c),ee.arc(c,c,c,180*n,270*n),ee.closePath()}ee.globalAlpha=g,ee.fillStyle=v,ee.lineWidth=P*r*2,ee.fill();const a=P*r,l=P*r;if(void 0!==w){const n=y[0],r=y[1],i=0,c=0,u=Math.max(1,ne.backgroundImage.width),s=Math.max(1,ne.backgroundImage.height),d=u/s,h=e/t;let m=u,p=s;switch(b){case"stretch":m=e,p=t;break;case"contain":m=e-2*a,p=t-2*l,d>=h?p=m/d:m=p*d;break;case"cover":m=e-2*a,p=t-2*l,d<=h?p=m/d:m=p*d}const f=a+o(n,0,1,0,e-2*a-m),g=l+o(r,0,1,0,t-2*l-p);ee.save(),ee.clip(),ee.drawImage(ne.backgroundImage,i,c,u,s,f,g,m,p),ee.restore()}void 0!==U&&(c().font=z,c().fontSize=Z*Math.min(e,t),c().lineHeight=R*c().fontSize,c().align=j,c().vAlign=O,c().justify=I,c().fontWeight=L,ee.textBaseline="bottom",ee.fillStyle=F,c().drawText(ee,U,a,l,e-2*a,t-2*l)),ee.globalCompositeOperation="destination-out",ee.stroke(),ee.globalCompositeOperation="source-over",ee.save(),ee.clip(),ee.strokeStyle=M,ee.stroke(),ee.restore(),te.needsUpdate=!0}),[ee,ne,P,x,M,w,v,y,b,te,L,Z,z,Z,R,C,O,j,U,F]);o.useEffect((()=>(l.Z.add(Y,re),()=>l.Z.remove(Y))),[Y,re]);const[oe,ie]=o.useState([]),ae=o.useMemo((()=>oe.map((()=>o.createRef()))),[oe]);o.useEffect((()=>{var e,t,n,r;const o={...Q},i=Math.min(o.width,o.height),a=Array.isArray(E)?(null!==(e=E[1])&&void 0!==e?e:0)+(null!==(t=E[3])&&void 0!==t?t:0):E,c=Array.isArray(E)?(null!==(n=E[0])&&void 0!==n?n:0)+(null!==(r=E[2])&&void 0!==r?r:0):E;o.width-=i*P*2,o.height-=i*P*2,o.width-=i*a*2,o.height-=i*c*2,ae.forEach(((e,t)=>{if(null===e.current)return;let[n,r]=function(e){let{currentChildren:t,index:n,flexDirection:r,alignItems:o,justifyContent:i,gap:a,size:c}=e;const l=t.reduce(((e,t)=>t.autoLayout?e+t.width:e),0),u=t.reduce(((e,t)=>t.autoLayout?e+t.height:e),0);let s=0,d=0,h=l,m="width",p="height";["column","column-reverse"].includes(r)&&(m="height",p="width",h=u),t.length>0&&!["space-between","space-around"].includes(i)&&(h+=a*(t.length-1)),["space-between","space-around"].includes(i)&&(a=0);const f=["row-reverse","column-reverse"].includes(r);let g=1;switch(["column","column-reverse"].includes(r)&&(g=-1),i){case"start":s=(.5*(c[m]-t[n][m])-(c[m]-h))*g;break;case"end":s=(.5*c[m]-.5*t[n][m])*g;break;case"center":s=(.5*h-.5*t[n][m])*g;break;case"space-between":case"space-around":t.length>1&&(s=(.5*c[m]-.5*t[n][m])*g)}let v=0;if(t.length>1&&("space-between"===i&&(v=Math.max(0,c[m]-h)/Math.max(1,t.length-1)),"space-around"===i&&(v=Math.max(0,c[m]-h)/Math.max(1,t.length+1))),"space-around"===i&&(s-=v*g),f)for(let e=1;e<=n;e++){const n=t[e-1];n.autoLayout&&(s-=(n[m]+v+a)*g)}else for(let e=t.length-2;e>=n;e--)t[e+1].autoLayout&&(s-=(t[e+1][m]+v+a)*g);switch(o){case"start":d=(.5*c[p]-.5*t[n][p])*g;break;case"end":d=(.5*t[n][p]-.5*c[p])*g;break;case"center":d=0}return["column","column-reverse"].includes(r)?[d,s]:[s,d]}({currentChildren:oe,index:t,flexDirection:k,alignItems:S,justifyContent:C,gap:D,size:o});oe[t].autoLayout||(n=0,r=0),e.current.position.x=n,e.current.position.y=r}))}),[ae,oe,Q,k,S,C,P,E,D]);const ce=o.useMemo((()=>null===K.parentUuid?n:K.renderOrder+n+1),[K.parentUuid,K.renderOrder,n]),le=o.useMemo((()=>({currentChildren:oe,parentSize:Q,parentUuid:Y,renderOrder:ce,addChild(e){ie((t=>{const n=[...t],r=t.findIndex((t=>t.uuid===e.uuid));return-1===r?n.push({...e}):n[r]={...e},n.sort(((e,t)=>e.index-t.index))}))},removeChild(e){ie((t=>t.filter((t=>t.uuid!==e))))}})),[oe,Y,Q,ce]);return o.useEffect((()=>{const e=J.current;null!==e&&e.traverse((e=>{e instanceof i.Mesh&&e.material instanceof i.Material&&(e.material.transparent=!0,e.material.opacity=g,e.material.needsUpdate=!0)}))}),[g]),o.createElement(s.Provider,{value:le},o.createElement("group",(0,r.Z)({ref:G},X,{visible:h}),o.createElement("mesh",{renderOrder:ce+n},o.createElement("planeGeometry",{args:[Q.width,Q.height]}),o.createElement("meshBasicMaterial",{ref:q,side:i.FrontSide,opacity:g,transparent:!0,depthWrite:!1,map:te})),o.createElement("group",{renderOrder:ce+n+1,ref:J},o.Children.map(T,((e,t)=>o.isValidElement(e)?o.createElement("group",{key:t,ref:ae[t]},o.cloneElement(e,{...e.props,childIndex:t})):e)))))}var m=o.forwardRef(h)},489:function(e,t,n){const r=new(n(477).Matrix4);function o(e){if(e.object)return!l.interactionsState[e.object.uuid].overFired}function i(e){if(!e.object)return;const t=l.interactionsState[e.object.uuid];return t.overFired&&!t.outFired}function a(e){return!!l.pointerDown&&(e.object?!l.interactionsState[e.object.uuid].downFired:void 0)}function c(e){if(l.pointerDown)return!1;if(!e.object)return;const t=l.interactionsState[e.object.uuid];return t.downFired&&!t.upFired}const l={disabled:!1,enabled:!0,lastInteractionUuid:"",interactions:[],interactionsState:{},pointerDown:!1,cleanUp:!1,cleanDown:!1,cleanMove:!1,create(){function e(){l.enabled=!0,l.cleanMove=!0}function t(){l.enabled=!0,l.pointerDown=!0,l.cleanDown=!0}function n(){l.pointerDown=!1,l.cleanUp=!0}return window.addEventListener("pointermove",e),window.addEventListener("pointerdown",t),window.addEventListener("pointerup",n),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerdown",t),window.removeEventListener("pointerup",n)}},add(e){(function(e){return void 0!==e.onPointerMove||void 0!==e.onPointerOver||void 0!==e.onPointerOut||void 0!==e.onPointerDown||void 0!==e.onPointerUp})(e)&&-1===l.interactions.findIndex((t=>{var n,r;return(null===(n=t.object)||void 0===n?void 0:n.uuid)===(null===(r=e.object)||void 0===r?void 0:r.uuid)}))&&e.object&&(l.interactionsState[e.object.uuid]={downFired:!1,upFired:!1,overFired:!1,outFired:!1},l.interactions.push(e))},remove(e){const t=l.interactions.findIndex((t=>t.uuid===e));t>-1&&(l.interactions.splice(t,1),document.body.style.cursor="auto")},handle(e,t){for(let e=0,n=l.interactions.length;e<n;e++){const n=l.interactions[e];if(!n.object)continue;const r=t.intersectObject(n.object,!0);if(0===r.length){i(n)&&(l.interactionsState[n.object.uuid].outFired=!0,l.interactionsState[n.object.uuid].overFired=!1,void 0!==n.onPointerOut&&(n.onPointerOut(),document.body.style.cursor="auto"));continue}const u=r[0];o(n)&&(l.interactionsState[n.object.uuid].overFired=!0,l.interactionsState[n.object.uuid].outFired=!1,void 0!==n.onPointerOver&&(n.onPointerOver(u),document.body.style.cursor="pointer")),a(n)&&(l.interactionsState[n.object.uuid].downFired=!0,void 0!==n.onPointerDown&&n.onPointerDown(u)),c(n)&&(l.interactionsState[n.object.uuid].upFired=!0,void 0!==n.onPointerUp&&(n.onPointerUp(u),document.body.style.cursor="auto")),void 0!==n.onPointerMove&&n.onPointerMove(u)}},update(e,t,n){if(l.enabled&&!l.disabled){if(n.length>0){for(let e=0,o=n.length;e<o;e++){if("right"!==n[e].inputSource.handedness)continue;const o=n[e].controller;r.identity().extractRotation(o.matrixWorld),t.ray.origin.setFromMatrixPosition(o.matrixWorld),t.ray.direction.set(0,0,-1).applyMatrix4(r)}l.handle(e,t)}else l.handle(e,t);if(l.cleanUp&&!l.pointerDown){l.cleanUp=!1;for(const e in l.interactionsState)l.interactionsState.hasOwnProperty(e)&&(l.interactionsState[e].upFired=!1,l.interactionsState[e].downFired=!1)}l.cleanDown&&l.pointerDown&&(l.cleanDown=!1)}}};t.Z=l},549:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(489);const o=new Map;function i(e,t){o.forEach((t=>t(e))),r.Z.update(e.camera,e.raycaster,t)}i.add=(e,t)=>{o.set(e,t)},i.remove=e=>{o.has(e)&&o.delete(e)}}}]);
//# sourceMappingURL=527.5c1233ce.chunk.js.map
"use strict";(self.webpackChunkreact_xr_ui=self.webpackChunkreact_xr_ui||[]).push([[411],{180:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(294),i=n(369),o=n(953),a=n(827),l=n(569),s=n(695),c=n(37),u=n(254);function d(e){let{children:t}=e;return r.createElement(r.Fragment,null,t)}function h(e){let{children:t,optimizedRendering:n=!1}=e;const h=r.useMemo((()=>new i.d(6,6,6,10,10,10).translate(0,3,0)),[]);return r.createElement(r.Fragment,null,r.createElement(o.Xz,{legacy:!0,flat:!0,linear:!0,gl:{alpha:!1}},r.createElement(a.XR,null,r.createElement(u.Z,{fontFamily:"system-ui",optimizedRendering:n},r.createElement("color",{args:["#333333"],attach:"background"}),r.createElement("lineSegments",{geometry:h},r.createElement("lineBasicMaterial",{color:"#c0c0c0"})),r.createElement(s.c,{makeDefault:!0,position:[0,1.6,0]}),r.createElement(c.z,{makeDefault:!0,target:[0,1,-1.8]}),r.createElement("ambientLight",null),r.createElement(l.z,null),r.createElement(d,null,r.createElement("group",{position:[0,1,-1.88]},t))))),r.createElement(a.vZ,{style:{position:"absolute",bottom:"1em",color:"black",left:"50%",translate:"-50%",padding:"0.5em 1em",cursor:"pointer"},mode:"VR",sessionInit:{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}},"Enter Immersive VR"))}},518:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(294);function i(e){let{pathname:t}=e;return r.createElement("a",{target:"_blank",rel:"nofollow",href:`https://github.com/Enijar/react-xr-ui/tree/main/examples/examples/${t}.tsx`,style:{display:"flex",gap:"1ch",position:"absolute",insetInlineEnd:"1em",insetBlockStart:"1em",blockSize:"2em",alignItems:"center",textDecoration:"none",backgroundColor:"#111111",paddingInline:"1em",paddingBlock:"0.5em",borderRadius:"0.25em",cursor:"pointer"}},r.createElement("span",null,"View Code"),r.createElement("svg",{height:"157.06",viewBox:"0 0 161.03 157.06",width:"161.03",xmlns:"http://www.w3.org/2000/svg",style:{inlineSize:"auto",blockSize:"100%"}},r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"m80.52 0c-44.47 0-80.52 36.05-80.52 80.52 0 35.57 23.07 65.76 55.06 76.4 4.02.75 5.5-1.75 5.5-3.87 0-1.92-.07-8.26-.11-14.99-22.4 4.87-27.13-9.5-27.13-9.5-3.66-9.31-8.94-11.78-8.94-11.78-7.31-5 .55-4.89.55-4.89 8.09.57 12.34 8.3 12.34 8.3 7.18 12.31 18.84 8.75 23.43 6.69.72-5.2 2.81-8.76 5.11-10.77-17.88-2.04-36.68-8.94-36.68-39.79 0-8.79 3.15-15.97 8.3-21.61-.84-2.03-3.59-10.22.78-21.31 0 0 6.76-2.16 22.15 8.25 6.42-1.78 13.31-2.68 20.15-2.71 6.84.03 13.74.93 20.17 2.71 15.37-10.42 22.12-8.25 22.12-8.25 4.38 11.09 1.63 19.28.79 21.31 5.16 5.64 8.29 12.82 8.29 21.61 0 30.93-18.84 37.73-36.77 39.73 2.89 2.5 5.46 7.4 5.46 14.91 0 10.77-.09 19.44-.09 22.1 0 2.14 1.45 4.65 5.53 3.86 31.97-10.66 55.02-40.83 55.02-76.39 0-44.48-36.05-80.53-80.51-80.53",fillRule:"evenodd"}),r.createElement("path",{d:"m30.5 115.61c-.18.4-.81.52-1.38.25-.58-.26-.91-.81-.72-1.21.17-.41.8-.53 1.39-.25.59.26.92.81.72 1.22"}),r.createElement("path",{d:"m33.76 119.24c-.38.36-1.13.19-1.64-.37-.53-.56-.63-1.31-.24-1.67.4-.35 1.12-.19 1.65.37.53.57.63 1.31.23 1.67z"}),r.createElement("path",{d:"m36.93 123.88c-.49.34-1.3.02-1.8-.69-.49-.72-.49-1.57.01-1.92.5-.34 1.29-.03 1.8.68.49.73.49 1.59-.01 1.94"}),r.createElement("path",{d:"m41.28 128.36c-.44.49-1.38.36-2.07-.31-.7-.65-.9-1.57-.46-2.06.45-.49 1.39-.35 2.09.31.7.65.91 1.58.44 2.06z"}),r.createElement("path",{d:"m47.28 130.96c-.19.63-1.1.92-2.01.65-.91-.28-1.51-1.01-1.32-1.65.19-.63 1.1-.93 2.02-.65.91.27 1.51 1.01 1.32 1.65"}),r.createElement("path",{d:"m53.87 131.44c.02.66-.75 1.21-1.71 1.23s-1.74-.52-1.75-1.17c0-.67.76-1.22 1.72-1.23.96-.02 1.74.51 1.74 1.17z"}),r.createElement("path",{d:"m60 130.4c.11.65-.55 1.31-1.5 1.49-.93.17-1.8-.23-1.92-.87-.12-.66.56-1.33 1.49-1.5.95-.17 1.8.22 1.93.88z"}))))}},48:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(462),i=n(294),o=n(477);function a(e){let{ctx:t,line:n,spaceWidth:r,spaceChar:i,width:o}=e;const a=n.trim(),l=a.split(/\s+/),s=l.length-1;if(0===s)return a;const c=(o-t.measureText(l.join("")).width)/r,u=Math.floor(c/s);if(c<1)return a;const d=i.repeat(u);return l.join(d)}const l="â€Š",s={debug:!1,align:"center",vAlign:"middle",fontSize:14,fontWeight:"",fontStyle:"",fontVariant:"",font:"Arial",lineHeight:null,justify:!1};var c=n(636),u=n(254);const d=i.createContext({parentUuid:null,parentSize:{width:1,height:1},currentChildren:[],renderOrder:0,addChild(){},removeChild(){}}),h=[0,0],m=new Map;function p(e,t){let{optimizedRendering:n,zIndex:p=0,resolution:g,visible:f=!0,autoLayout:y=!0,premultiplyAlpha:x,depthTest:b,depthWrite:v=!1,width:w,height:E,aspectRatio:M,opacity:k=1,backgroundColor:C="transparent",backgroundImage:R,backgroundSize:A,backgroundPosition:z=h,alphaTest:S=0,padding:T=0,borderRadius:I=0,borderWidth:P=0,borderColor:U="transparent",flexDirection:F="row",alignItems:O="center",justifyContent:B="center",gap:W=0,textContent:j,textAlign:D="left",justifyText:L=!1,verticalAlign:V="top",color:Z="white",fontFamily:H,fontSize:N="16px",fontWeight:$="normal",lineHeight:_=null,childIndex:q,children:X,onPointerMove:G,onPointerOver:J,onPointerOut:K,onPointerDown:Q,onPointerUp:Y,imageRendering:ee="crisp-edges",imageSmoothingEnabled:te=!0,textRendering:ne="auto",dpr:re,onLayout:ie,...oe}=e;const ae=i.useRef(!0),[le,se]=i.useState((()=>({opacity:k,backgroundColor:C})));i.useEffect((()=>{se((e=>({...e,opacity:k})))}),[k]),i.useEffect((()=>{se((e=>({...e,backgroundColor:C})))}),[C]);const ce=i.useContext(u.q),ue=i.useMemo((()=>g??ce.layerResolution),[g,ce.layerResolution]),de=i.useMemo((()=>H??ce.fontFamily),[H,ce.fontFamily]),he=i.useMemo((()=>n??ce.optimizedRendering),[n,ce.optimizedRendering]),me=i.useRef(null),pe=i.useRef(null),ge=i.useRef(null),fe=i.useRef(null);i.useEffect((()=>{const e=ge.current;null!==e&&(e.blending=o.CustomBlending)}),[]),i.useImperativeHandle(t,(()=>({group:me.current,mesh:pe.current,material:ge.current,setAttrs:se})));const ye=i.useContext(d),xe=i.useMemo((()=>{const e={width:1,height:1};if("string"==typeof w){const t=parseFloat(w);null===ye.parentUuid?e.width=t/100:isNaN(t)?e.width=1:e.width=ye.parentSize.width*(t/100)}else e.width=w??1;if("string"==typeof E){const t=parseFloat(E);null===ye.parentUuid?e.height=t/100:isNaN(t)?e.height=1:e.height=ye.parentSize.height*(t/100)}else e.height=E??1;return void 0!==M&&(void 0===w&&(e.width=e.height*M),void 0===E&&(e.height=e.width*M)),e}),[w,E,ye.parentUuid,ye.parentSize,M]),be=i.useMemo((()=>o.MathUtils.generateUUID()),[]);i.useEffect((()=>{if(null!==ye.parentUuid)return ye.addChild({width:xe.width,height:xe.height,index:q,autoLayout:y,uuid:be}),()=>{ye.removeChild(be)}}),[xe,q,y,ye.parentUuid]);const ve=i.useRef({onPointerMove:G,onPointerOver:J,onPointerOut:K,onPointerDown:Q,onPointerUp:Y});i.useMemo((()=>{ve.current.onPointerMove=G,ve.current.onPointerOver=J,ve.current.onPointerOut=K,ve.current.onPointerDown=Q,ve.current.onPointerUp=Y}),[G,J,K,Q,Y]);const we=i.useMemo((()=>0===["transparent"===le.backgroundColor?void 0:le.backgroundColor,R,"transparent"===U?void 0:U,j].filter((e=>void 0!==e)).length),[le.backgroundColor,R,U,j]),Ee=i.useMemo((()=>we?null:document.createElement("canvas").getContext("2d")),[we]);i.useEffect((()=>{null!==Ee&&(Ee.imageSmoothingEnabled=te,Ee.canvas.style.imageRendering=ee)}),[Ee,ee,te]),i.useEffect((()=>{null!==Ee&&(Ee.textRendering=ne,Ee.canvas.style.textRendering=ne)}),[Ee,ne]),i.useMemo((()=>{if(null===Ee)return;const e=re??window.devicePixelRatio??1;Ee.scale(e,e)}),[Ee,re]),i.useMemo((()=>{null!==Ee&&(Ee.canvas.width=Math.max(1,Math.floor(xe.width*ue)),Ee.canvas.height=Math.max(1,Math.floor(xe.height*ue)))}),[Ee,xe,ue]);const Me=i.useMemo((()=>{if(null===Ee)return null;const e=new o.CanvasTexture(Ee.canvas);return e.anisotropy=16,e.premultiplyAlpha=!0,e}),[Ee,xe]);i.useEffect((()=>{null!==Me&&(Me.premultiplyAlpha=x??ce.premultiplyAlpha)}),[Me,x,ce.premultiplyAlpha]);const ke=i.useMemo((()=>{const e=new Image;return e.crossOrigin="Anonymous",{backgroundImage:e}}),[]),[Ce,Re]=i.useState(0),Ae=i.useRef(!1);i.useEffect((()=>(Ae.current=!0,()=>{Ae.current=!1})),[]),i.useMemo((()=>{if(R){if(!m.has(R)){const e=new Image;e.crossOrigin="Anonymous",e.onload=()=>{Ae.current&&Re((e=>(e+1)%1e3))},e.src=R,m.set(R,e)}ke.backgroundImage=m.get(R)}}),[ke.backgroundImage,R]);const[ze,Se]=i.useState([]);i.useEffect((()=>{ae.current=!0;const e=[];return e.push(requestAnimationFrame((()=>{e.push(requestAnimationFrame((()=>{ae.current=!he})))}))),()=>{e.forEach((e=>{cancelAnimationFrame(e)}))}}),[Ce,ze,he,Ee,xe,ue,I,U,le,ke,z,A,de,N,_,D,V,L,$,Z,j]),(0,c.A)((()=>{if(ae.current&&null!==Ee){const e=Ee.canvas.width,t=Ee.canvas.height,n=Math.PI/180,r=Math.min(e,t),{mapLinear:i}=o.MathUtils;Ee.globalCompositeOperation="source-over",Ee.clearRect(0,0,e,t);{const i=Array.isArray(I),o=I,a=I;let[l=0,s=0,c=0,u=0]=i?o:[a,a,a,a];l*=r,s*=r,c*=r,u*=r,Ee.beginPath(),Ee.moveTo(l,0),Ee.lineTo(e-s,0),Ee.arc(e-s,s,s,270*n,360*n),Ee.lineTo(e,t-c),Ee.arc(e-c,t-c,c,0,90*n),Ee.lineTo(u,t),Ee.arc(u,t-u,u,90*n,180*n),Ee.lineTo(0,l),Ee.arc(l,l,l,180*n,270*n),Ee.closePath()}Ee.globalAlpha=le.opacity,Ee.fillStyle=le.backgroundColor,Ee.lineWidth=P*r*2,Ee.fill();const c=P*r,u=P*r;if(void 0!==R){const n=z[0],r=z[1],o=0,a=0,l=Math.max(1,ke.backgroundImage.width),s=Math.max(1,ke.backgroundImage.height),d=l/s,h=e/t;let m=l,p=s;switch(A){case"stretch":m=e,p=t;break;case"contain":m=e-2*c,p=t-2*u,d>=h?p=m/d:m=p*d;break;case"cover":m=e-2*c,p=t-2*u,d<=h?p=m/d:m=p*d}const g=c+i(n,0,1,0,e-2*c-m),f=u+i(r,0,1,0,t-2*u-p);Ee.save(),Ee.clip(),Ee.drawImage(ke.backgroundImage,o,a,l,s,g,f,m,p),Ee.restore()}if(void 0!==j){let n=0;if("string"==typeof N){let e=parseFloat(N);isNaN(e)&&(e=16),n=e}else n=N*Math.min(e,t);Ee.textBaseline="bottom",Ee.fillStyle=Z,function(e,t,n){const{width:r,height:i,x:o,y:c}=n,u={...s,...n};if(r<=0||i<=0||u.fontSize<=0)return{height:0};const d=o+r,h=c+i,{fontStyle:m,fontVariant:p,fontWeight:g,fontSize:f,font:y}=u,x=`${m} ${p} ${g} ${f}px ${y}`;e.font=x;let b,v=c+i/2+u.fontSize/2;"right"===u.align?(b=d,e.textAlign="right"):"left"===u.align?(b=o,e.textAlign="left"):(b=o+r/2,e.textAlign="center");const w=function(e){let{ctx:t,text:n,justify:r,width:i}=e;const o=new Map,s=e=>{let n=o.get(e);return void 0!==n||(n=t.measureText(e).width,o.set(e,n)),n};let c=[],u=n.split("\n");const d=r?s(l):0;let h=0,m=0;for(const e of u){let n=s(e);const o=e.length;if(n<=i){c.push(e);continue}let u,p,g=e,f="";for(;n>i;){if(h++,u=m,p=0===u?0:s(e.substring(0,u)),p<i)for(;p<i&&u<o&&(u++,p=s(g.substring(0,u)),u!==o););else if(p>i)for(;p>i&&(u=Math.max(1,u-1),p=s(g.substring(0,u)),0!==u&&1!==u););if(m=Math.round(m+(u-m)/h),u--,u>0){let e=u;if(" "!=g.substring(e,e+1)){for(;" "!=g.substring(e,e+1)&&e>=0;)e--;e>0&&(u=e)}}0===u&&(u=1),f=g.substring(0,u),f=r?a({ctx:t,line:f,spaceWidth:d,spaceChar:l,width:i}):f,c.push(f),g=g.substring(u),n=s(g)}n>0&&(f=r?a({ctx:t,line:g,spaceWidth:d,spaceChar:l,width:i}):g,c.push(f))}return c}({ctx:e,text:t,justify:u.justify,width:r}),E=u.lineHeight?u.lineHeight:function(e){let{ctx:t,text:n,style:r}=e;const i=t.textBaseline,o=t.font;t.textBaseline="bottom",t.font=r;const{actualBoundingBoxAscent:a}=t.measureText(n);return t.textBaseline=i,t.font=o,a}({ctx:e,text:"M",style:x}),M=E*(w.length-1),k=M/2;let C=c;"top"===u.vAlign?(e.textBaseline="top",v=c):"bottom"===u.vAlign?(e.textBaseline="bottom",v=h-M,C=h):(e.textBaseline="bottom",C=c+i/2,v-=k),w.forEach((t=>{e.fillText(t,b,v),v+=E})),u.debug&&(e.lineWidth=1,e.strokeStyle="#0C8CE9",e.strokeRect(o,c,r,i),e.lineWidth=1,e.strokeStyle="#0C8CE9",e.beginPath(),e.moveTo(b,c),e.lineTo(b,h),e.stroke(),e.strokeStyle="#0C8CE9",e.beginPath(),e.moveTo(o,C),e.lineTo(d,C),e.stroke())}(Ee,j,{x:c,y:u,width:e-2*c,height:t-2*u,font:de,fontSize:n,lineHeight:_*n,align:D,vAlign:V,justify:L,fontWeight:$})}Ee.globalCompositeOperation="destination-out",Ee.stroke(),Ee.globalCompositeOperation="source-over",Ee.save(),Ee.clip(),Ee.strokeStyle=U,Ee.stroke(),Ee.restore()}null!==Me&&(Me.needsUpdate=!0)}));const Te=i.useMemo((()=>ze.map((()=>i.createRef()))),[ze]),Ie=i.useRef(ie);i.useMemo((()=>{Ie.current=ie}),[ie]),i.useEffect((()=>{const e={...xe},t=Math.min(e.width,e.height),n=Array.isArray(T)?(T[1]??0)+(T[3]??0):T,r=Array.isArray(T)?(T[0]??0)+(T[2]??0):T;e.width-=t*P*2,e.height-=t*P*2,e.width-=t*n*2,e.height-=t*r*2,Te.forEach(((t,n)=>{const r=t.current;if(null===r)return;let[i,o]=function(e){let{currentChildren:t,index:n,flexDirection:r,alignItems:i,justifyContent:o,gap:a,size:l}=e;const s=t.reduce(((e,t)=>t.autoLayout?e+t.width:e),0),c=t.reduce(((e,t)=>t.autoLayout?e+t.height:e),0);let u=0,d=0,h=s,m="width",p="height";["column","column-reverse"].includes(r)&&(m="height",p="width",h=c),t.length>0&&!["space-between","space-around"].includes(o)&&(h+=a*(t.length-1)),["space-between","space-around"].includes(o)&&(a=0);const g=["row-reverse","column-reverse"].includes(r);let f=1;switch(["column","column-reverse"].includes(r)&&(f=-1),o){case"start":u=(.5*(l[m]-t[n][m])-(l[m]-h))*f;break;case"end":u=(.5*l[m]-.5*t[n][m])*f;break;case"center":u=(.5*h-.5*t[n][m])*f;break;case"space-between":case"space-around":t.length>1&&(u=(.5*l[m]-.5*t[n][m])*f)}let y=0;if(t.length>1&&("space-between"===o&&(y=Math.max(0,l[m]-h)/Math.max(1,t.length-1)),"space-around"===o&&(y=Math.max(0,l[m]-h)/Math.max(1,t.length+1))),"space-around"===o&&(u-=y*f),g)for(let e=1;e<=n;e++){const n=t[e-1];n.autoLayout&&(u-=(n[m]+y+a)*f)}else for(let e=t.length-2;e>=n;e--)t[e+1].autoLayout&&(u-=(t[e+1][m]+y+a)*f);switch(i){case"start":d=(.5*l[p]-.5*t[n][p])*f;break;case"end":d=(.5*t[n][p]-.5*l[p])*f;break;case"center":d=0}return["column","column-reverse"].includes(r)?[d,u]:[u,d]}({currentChildren:ze,index:n,flexDirection:F,alignItems:O,justifyContent:B,gap:W,size:e});ze[n].autoLayout||(i=0,o=0),r.position.x=i,r.position.y=o})),Ie.current&&Ie.current()}),[Te,ze,xe,F,O,B,P,T,W]);const Pe=i.useMemo((()=>null===ye.parentUuid?p:ye.renderOrder+p+1),[ye.parentUuid,ye.renderOrder,p]),Ue=i.useMemo((()=>ce.alphaTest??S),[ce.alphaTest,S]),Fe=i.useMemo((()=>({currentChildren:ze,parentSize:xe,parentUuid:be,renderOrder:Pe,addChild(e){Se((t=>{const n=[...t],r=t.findIndex((t=>t.uuid===e.uuid));return-1===r?n.push({...e}):n[r]={...e},n.sort(((e,t)=>e.index-t.index))}))},removeChild(e){Se((t=>t.filter((t=>t.uuid!==e))))}})),[ze,be,xe,Pe]);i.useEffect((()=>{const e=fe.current;null!==e&&e.traverse((e=>{e instanceof o.Mesh&&e.material instanceof o.Material&&(e.material.transparent=!0,e.material.opacity=le.opacity,e.material.needsUpdate=!0)}))}),[le.opacity]),i.useEffect((()=>()=>{null!==Ee&&(Ee.canvas.width=0,Ee.canvas.height=0)}),[Ee]);const Oe=i.useMemo((()=>Array.isArray(X)?X.filter((e=>i.isValidElement(e))):i.isValidElement(X)?X:[]),[X]);return i.createElement(d.Provider,{value:Fe},i.createElement("group",(0,r.Z)({ref:me},oe,{visible:f,name:"react-xr-ui-layer"}),i.createElement("mesh",{ref:pe,renderOrder:Pe+p,visible:null!==Me},i.createElement("planeGeometry",{args:[xe.width,xe.height]}),i.createElement("meshBasicMaterial",{ref:ge,side:o.FrontSide,opacity:le.opacity,transparent:!0,depthTest:b??ce.depthTest,depthWrite:v,alphaTest:Ue,map:Me??void 0})),i.createElement("group",{renderOrder:Pe+p+1,ref:fe},i.Children.map(Oe,((e,t)=>i.createElement("group",{key:t,ref:Te[t]},i.cloneElement(e,{...e.props,childIndex:t})))))))}var g=i.forwardRef(p)},254:function(e,t,n){n.d(t,{Z:function(){return o},q:function(){return i}});var r=n(294);const i=r.createContext({layerResolution:1024,fontFamily:"system-ui, sans-serif",optimizedRendering:!1,alphaTest:0,depthTest:!0,premultiplyAlpha:!0});function o(e){let{children:t,layerResolution:n=1024,fontFamily:o,optimizedRendering:a=!1,alphaTest:l,depthTest:s=!0,premultiplyAlpha:c=!1}=e;return r.createElement(i.Provider,{value:{layerResolution:n,fontFamily:o,optimizedRendering:a,alphaTest:l,depthTest:s,premultiplyAlpha:c}},t)}}}]);
//# sourceMappingURL=411.34f0d41e.chunk.js.map
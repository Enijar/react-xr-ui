"use strict";(self.webpackChunkreact_xr_ui=self.webpackChunkreact_xr_ui||[]).push([[661],{661:function(e,l,a){a.r(l),a.d(l,{default:function(){return s}});var t=a(294),n=a(180),u=a(634),r=a(738),v=a(728);const c="delete",i="toggleCase";function o(e){let{onChange:l,backgroundColor:a="#000000",keyColor:n="#222222",keyHoverColor:o="#444444",enabled:b=!0}=e;const s=(0,r.y)((e=>e.gl.capabilities)),h=t.useMemo((()=>s.getMaxAnisotropy()),[s]),m=t.useRef(l);t.useMemo((()=>{m.current=l}),[l]);const d=t.useRef(null),p=t.useRef({uppercase:!1,pointer:{x:-1,y:-1},value:"",hitKey:null}),f=t.useMemo((()=>[[[{label:"§",value:"§"},{label:"±",value:"±"}],[{label:"1",value:"1"},{label:"!",value:"!"}],[{label:"2",value:"2"},{label:"@",value:"@"}],[{label:"3",value:"3"},{label:"£",value:"£"}],[{label:"4",value:"4"},{label:"$",value:"$"}],[{label:"5",value:"5"},{label:"%",value:"%"}],[{label:"6",value:"6"},{label:"^",value:"^"}],[{label:"7",value:"7"},{label:"&",value:"&"}],[{label:"8",value:"8"},{label:"*",value:"*"}],[{label:"9",value:"9"},{label:"(",value:"("}],[{label:"0",value:"0"},{label:")",value:")"}],[{label:"-",value:"-"},{label:"_",value:"_"}],[{label:"=",value:"="},{label:"+",value:"+"}],[{label:"⌫",action:c}]],[[{label:"↹",value:"\t"}],[{label:"q",value:"q"},{label:"Q",value:"Q"}],[{label:"w",value:"w"},{label:"W",value:"W"}],[{label:"e",value:"e"},{label:"E",value:"E"}],[{label:"r",value:"r"},{label:"R",value:"R"}],[{label:"t",value:"t"},{label:"T",value:"T"}],[{label:"y",value:"y"},{label:"Y",value:"Y"}],[{label:"u",value:"u"},{label:"U",value:"U"}],[{label:"i",value:"i"},{label:"I",value:"I"}],[{label:"o",value:"o"},{label:"O",value:"O"}],[{label:"p",value:"p"},{label:"P",value:"P"}],[{label:"[",value:"["},{label:"{",value:"{"}],[{label:"]",value:"]"},{label:"}",value:"}"}],[{label:"↵",value:"\n",spanRows:2}]],[[{label:"⇪",action:i}],[{label:"a",value:"a"},{label:"A",value:"A"}],[{label:"s",value:"s"},{label:"S",value:"S"}],[{label:"d",value:"d"},{label:"D",value:"D"}],[{label:"f",value:"f"},{label:"F",value:"F"}],[{label:"g",value:"g"},{label:"G",value:"G"}],[{label:"h",value:"h"},{label:"H",value:"H"}],[{label:"j",value:"j"},{label:"J",value:"J"}],[{label:"k",value:"k"},{label:"K",value:"K"}],[{label:"l",value:"l"},{label:"L",value:"L"}],[{label:";",value:";"},{label:":",value:":"}],[{label:"'",value:"'"},{label:'"',value:'"'}],[{label:"\\",value:"\\"},{label:"|",value:"|"}]],[[null],[{label:"`",value:"`"},{label:"~",value:"~"}],[{label:"z",value:"z"},{label:"Z",value:"Z"}],[{label:"x",value:"x"},{label:"X",value:"X"}],[{label:"c",value:"c"},{label:"C",value:"C"}],[{label:"v",value:"v"},{label:"V",value:"V"}],[{label:"b",value:"b"},{label:"B",value:"B"}],[{label:"n",value:"n"},{label:"N",value:"N"}],[{label:"m",value:"m"},{label:"M",value:"M"}],[{label:",",value:","},{label:"<",value:"<"}],[{label:".",value:"."},{label:">",value:">"}],[{label:"?",value:"?"},{label:"/",value:"/"}]],[[null],[null],[null],[{label:"SPACE",value:" ",spanCols:7}]]]),[]),g=t.useMemo((()=>f.reduce(((e,l)=>Math.max(e,l.length)),0)),[f]),y=t.useMemo((()=>document.createElement("canvas").getContext("2d")),[]),x=t.useMemo((()=>({width:1,height:y.canvas.width/g*f.length/y.canvas.width,scale:1,textScale:.4,canvasScale:1024})),[y.canvas.width,f,g]);t.useMemo((()=>{y.canvas.width=x.width*x.canvasScale,y.canvas.height=x.height*x.canvasScale,y.canvas.style.textRendering="geometricPrecision"}),[y.canvas,x.width,x.height,x.canvasScale]),(0,r.z)((()=>{const e=d.current;if(null===e)return;if(null===e.material.map)return;const[l,t]=[y.canvas.width,y.canvas.height],u=l/g;y.clearRect(0,0,l,t),y.fillStyle=a,y.fillRect(0,0,l,t),f.forEach(((e,a)=>{e.forEach(((e,r)=>{var v,c;let i=e[0];var b;if(p.current.uppercase&&(i=null!==(b=e[1])&&void 0!==b?b:e[0]),null===i)return;if(void 0===i.label)return;const s=null!==(v=i.spanCols)&&void 0!==v?v:1,h=null!==(c=i.spanRows)&&void 0!==c?c:1,m=u*s,d=u*h,f=u*r,g=u*a,w=f+m/2,E=g+d/2,C=function(e,a,n,u){const r=p.current.pointer.x*l,v=p.current.pointer.y*t;return r>=e&&r<=e+n&&v>=a&&v<=a+u}(f,g,m,d);C&&(p.current.hitKey=i),y.fillStyle=C?o:n,y.fillRect(f,g,m,d),y.font="".concat(Math.min(m,d)*x.textScale,"px system-ui"),y.fillStyle="#ffffff",y.textAlign="center",y.textBaseline="middle",y.fillText(i.label,w,E)}))})),e.material.map.needsUpdate=!0}));const w=t.useCallback((e=>{p.current.pointer.x=e.uv.x,p.current.pointer.y=1-e.uv.y}),[]);return t.createElement(v.Z,{enabled:b,onOver:w,onMove:w,onOut:()=>{p.current.pointer.x=-1,p.current.pointer.y=-1},onDown:e=>{if(w(e),null!==p.current.hitKey){if(void 0!==p.current.hitKey.value&&(p.current.value+=p.current.hitKey.value),void 0!==p.current.hitKey.action)switch(p.current.hitKey.action){case c:p.current.value=p.current.value.slice(0,-1);break;case i:p.current.uppercase=!p.current.uppercase}void 0!==m.current&&m.current(p.current.value)}}},t.createElement(u.Z,{width:x.width,height:x.height,visible:b},t.createElement("mesh",{ref:d,scale:x.scale,renderOrder:999999},t.createElement("planeGeometry",{args:[x.width,x.height]}),t.createElement("meshBasicMaterial",{depthWrite:!1},t.createElement("canvasTexture",{attach:"map",image:y.canvas,anisotropy:h})))))}var b=a(518);function s(){const[e,l]=t.useState("");return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(u.Z,{flexDirection:"column",gap:.05},t.createElement(u.Z,{width:1,height:.1,fontSize:1,textContent:"Enter your name",textAlign:"center"}),t.createElement(u.Z,{width:1,height:.1,fontSize:.5,textContent:e,textAlign:"center"}),t.createElement(o,{onChange:l}))),t.createElement(b.Z,{pathname:"input"}))}},728:function(e,l,a){a.d(l,{Z:function(){return r}});var t=a(294),n=a(638),u=a(878);function r(e){let{children:l,onMove:a,onOver:r,onOut:v,onDown:c,onUp:i,enabled:o=!0}=e;const b=(0,n.nH)((e=>e.isPresenting)),s=t.useCallback((e=>l=>{b&&o&&e&&e(l.intersection,l.intersections)}),[b,o,c,i,a,r,v]),h=t.useCallback((e=>l=>{b||o&&e&&(l.stopPropagation(),e(l.intersections[0],l.intersections))}),[b,o,c,i,a,r,v]);return t.createElement(u.vj,{onSelectStart:s(c),onSelectEnd:s(i),onMove:s(a),onHover:s(r),onBlur:s(v)},t.createElement("group",{onPointerDown:h(c),onPointerUp:h(i),onPointerMove:h(a),onPointerOver:h(r),onPointerOut:h(v)},l))}}}]);
//# sourceMappingURL=661.03dfba50.chunk.js.map
"use strict";(self.webpackChunkreact_xr_ui=self.webpackChunkreact_xr_ui||[]).push([[661],{661:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(294),n=a(180),u=a(48),r=a(636),v=a(728);const c={delete:"delete",toggleCase:"toggleCase"};function o(e){let{onChange:l,backgroundColor:a="#000000",keyColor:n="#222222",keyHoverColor:o="#444444",enabled:i=!0}=e;const b=(0,r.z)((e=>e.gl.capabilities)),s=t.useMemo((()=>b.getMaxAnisotropy()),[b]),h=t.useRef(l);t.useMemo((()=>{h.current=l}),[l]);const m=t.useRef(null),d=t.useRef({uppercase:!1,pointer:{x:-1,y:-1},value:"",hitKey:null}),p=t.useMemo((()=>[[[{label:"§",value:"§"},{label:"±",value:"±"}],[{label:"1",value:"1"},{label:"!",value:"!"}],[{label:"2",value:"2"},{label:"@",value:"@"}],[{label:"3",value:"3"},{label:"£",value:"£"}],[{label:"4",value:"4"},{label:"$",value:"$"}],[{label:"5",value:"5"},{label:"%",value:"%"}],[{label:"6",value:"6"},{label:"^",value:"^"}],[{label:"7",value:"7"},{label:"&",value:"&"}],[{label:"8",value:"8"},{label:"*",value:"*"}],[{label:"9",value:"9"},{label:"(",value:"("}],[{label:"0",value:"0"},{label:")",value:")"}],[{label:"-",value:"-"},{label:"_",value:"_"}],[{label:"=",value:"="},{label:"+",value:"+"}],[{label:"⌫",action:c.delete}]],[[{label:"↹",value:"\t"}],[{label:"q",value:"q"},{label:"Q",value:"Q"}],[{label:"w",value:"w"},{label:"W",value:"W"}],[{label:"e",value:"e"},{label:"E",value:"E"}],[{label:"r",value:"r"},{label:"R",value:"R"}],[{label:"t",value:"t"},{label:"T",value:"T"}],[{label:"y",value:"y"},{label:"Y",value:"Y"}],[{label:"u",value:"u"},{label:"U",value:"U"}],[{label:"i",value:"i"},{label:"I",value:"I"}],[{label:"o",value:"o"},{label:"O",value:"O"}],[{label:"p",value:"p"},{label:"P",value:"P"}],[{label:"[",value:"["},{label:"{",value:"{"}],[{label:"]",value:"]"},{label:"}",value:"}"}],[{label:"↵",value:"\n",spanRows:2}]],[[{label:"⇪",action:c.toggleCase}],[{label:"a",value:"a"},{label:"A",value:"A"}],[{label:"s",value:"s"},{label:"S",value:"S"}],[{label:"d",value:"d"},{label:"D",value:"D"}],[{label:"f",value:"f"},{label:"F",value:"F"}],[{label:"g",value:"g"},{label:"G",value:"G"}],[{label:"h",value:"h"},{label:"H",value:"H"}],[{label:"j",value:"j"},{label:"J",value:"J"}],[{label:"k",value:"k"},{label:"K",value:"K"}],[{label:"l",value:"l"},{label:"L",value:"L"}],[{label:";",value:";"},{label:":",value:":"}],[{label:"'",value:"'"},{label:'"',value:'"'}],[{label:"\\",value:"\\"},{label:"|",value:"|"}]],[[null],[{label:"`",value:"`"},{label:"~",value:"~"}],[{label:"z",value:"z"},{label:"Z",value:"Z"}],[{label:"x",value:"x"},{label:"X",value:"X"}],[{label:"c",value:"c"},{label:"C",value:"C"}],[{label:"v",value:"v"},{label:"V",value:"V"}],[{label:"b",value:"b"},{label:"B",value:"B"}],[{label:"n",value:"n"},{label:"N",value:"N"}],[{label:"m",value:"m"},{label:"M",value:"M"}],[{label:",",value:","},{label:"<",value:"<"}],[{label:".",value:"."},{label:">",value:">"}],[{label:"?",value:"?"},{label:"/",value:"/"}]],[[null],[null],[null],[{label:"SPACE",value:" ",spanCols:7}]]]),[]),f=t.useMemo((()=>p.reduce(((e,l)=>Math.max(e,l.length)),0)),[p]),g=t.useMemo((()=>document.createElement("canvas").getContext("2d")),[]),x=t.useMemo((()=>({width:1,height:g.canvas.width/f*p.length/g.canvas.width,scale:1,textScale:.4,canvasScale:1024})),[g.canvas.width,p,f]);t.useMemo((()=>{g.canvas.width=x.width*x.canvasScale,g.canvas.height=x.height*x.canvasScale,g.canvas.style.textRendering="geometricPrecision"}),[g.canvas,x.width,x.height,x.canvasScale]),(0,r.A)((()=>{const e=m.current;if(null===e)return;if(null===e.material.map)return;const[l,t]=[g.canvas.width,g.canvas.height],u=l/f;g.clearRect(0,0,l,t),g.fillStyle=a,g.fillRect(0,0,l,t),p.forEach(((e,a)=>{e.forEach(((e,r)=>{let v=e[0];if(d.current.uppercase&&(v=e[1]??e[0]),null===v)return;if(void 0===v.label)return;const c=v.spanCols??1,i=v.spanRows??1,b=u*c,s=u*i,h=u*r,m=u*a,p=h+b/2,f=m+s/2,y=function(e,a,n,u){const r=d.current.pointer.x*l,v=d.current.pointer.y*t;return r>=e&&r<=e+n&&v>=a&&v<=a+u}(h,m,b,s);y&&(d.current.hitKey=v),g.fillStyle=y?o:n,g.fillRect(h,m,b,s),g.font=Math.min(b,s)*x.textScale+"px system-ui",g.fillStyle="#ffffff",g.textAlign="center",g.textBaseline="middle",g.fillText(v.label,p,f)}))})),e.material.map.needsUpdate=!0}));const y=t.useCallback((e=>{d.current.pointer.x=e.uv.x,d.current.pointer.y=1-e.uv.y}),[]);return t.createElement(v.Z,{enabled:i,onOver:y,onMove:y,onOut:()=>{d.current.pointer.x=-1,d.current.pointer.y=-1},onDown:e=>{if(y(e),null!==d.current.hitKey){if(void 0!==d.current.hitKey.value&&(d.current.value+=d.current.hitKey.value),void 0!==d.current.hitKey.action)switch(d.current.hitKey.action){case c.delete:d.current.value=d.current.value.slice(0,-1);break;case c.toggleCase:d.current.uppercase=!d.current.uppercase}void 0!==h.current&&h.current(d.current.value)}}},t.createElement(u.Z,{width:x.width,height:x.height,visible:i},t.createElement("mesh",{ref:m,scale:x.scale,renderOrder:999999},t.createElement("planeGeometry",{args:[x.width,x.height]}),t.createElement("meshBasicMaterial",{depthWrite:!1},t.createElement("canvasTexture",{attach:"map",image:g.canvas,anisotropy:s})))))}var i=a(518);function b(){const[e,l]=t.useState("");return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(u.Z,{flexDirection:"column",gap:.05},t.createElement(u.Z,{width:1,height:.1,fontSize:1,textContent:"Enter your name",textAlign:"center"}),t.createElement(u.Z,{width:1,height:.1,fontSize:.5,textContent:e,textAlign:"center"}),t.createElement(o,{onChange:l}))),t.createElement(i.Z,{pathname:"input"}))}},728:function(e,l,a){a.d(l,{Z:function(){return r}});var t=a(294),n=a(827),u=a(850);function r(e){let{children:l,onMove:a,onOver:r,onOut:v,onDown:c,onUp:o,enabled:i=!0}=e;const b=(0,n.nH)((e=>e.isPresenting)),s=t.useCallback((e=>l=>{b&&i&&e&&e(l.intersection,l.intersections)}),[b,i,c,o,a,r,v]),h=t.useCallback((e=>l=>{b||i&&e&&(l.stopPropagation(),e(l.intersections[0],l.intersections))}),[b,i,c,o,a,r,v]);return t.createElement(u.vj,{onSelectStart:s(c),onSelectEnd:s(o),onMove:s(a),onHover:s(r),onBlur:s(v)},t.createElement("group",{onPointerDown:h(c),onPointerUp:h(o),onPointerMove:h(a),onPointerOver:h(r),onPointerOut:h(v)},l))}}}]);
//# sourceMappingURL=661.f5fc98d4.chunk.js.map